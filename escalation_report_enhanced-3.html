<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Escalation to Client Details Report - Critical Start</title>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-sankey@0.14.0/dist/chartjs-chart-sankey.min.js" integrity="sha512-p9MnIc0Xzj4QcoFGM2vuBWpT+8mDtCgpLju/3i1F7w3LVRTIWEpXgEmVH1SUMulnO5A55oHdku3IjS7BwYFm0w==" crossorigin="anonymous"></script>
    <style>
        /* ============================================================================
           CSS VARIABLES - CRITICAL START BRAND COLOR SYSTEM
           ============================================================================
           BUSINESS CONTEXT: Brand colors defined per Critical Start brand guidelines.
           These colors carry semantic meaning throughout the report:
           - Blue (#009CDE): Primary brand color, positive metrics, trust indicators
           - Navy (#004C97): Headers, emphasis, professional tone
           - Slate (#343741): Body text, neutral information
           - Purple (#702F8A): After-hours metrics, off-hours indicators
           - Red (#EF3340): Critical alerts, high-priority items, negative trends
           - Orange (#FF6A14): Warnings, medium-priority, attention items
           
           TRANSPARENCY VARIANTS: Used for backgrounds, overlays, and subtle emphasis.
           Opacity values (05, 10, 12, 15, 25, 60, 75, 80) create visual hierarchy.
           ============================================================================ */
        :root {
            --cs-blue: #009CDE;
            --cs-navy: #004C97;
            --cs-slate: #343741;
            --cs-purple: #702F8A;
            --cs-red: #EF3340;
            --cs-orange: #FF6A14;
            --cs-blue-05: rgba(0, 156, 222, 0.05);
            --cs-blue-10: rgba(0, 156, 222, 0.1);
            --cs-blue-15: rgba(0, 156, 222, 0.15);
            --cs-navy-12: rgba(0, 76, 151, 0.12);
            --cs-navy-25: rgba(0, 76, 151, 0.25);
            --cs-slate-80: rgba(52, 55, 65, 0.8);
            --cs-slate-75: rgba(52, 55, 65, 0.75);
            --cs-slate-60: rgba(52, 55, 65, 0.6);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', system-ui, sans-serif;
            background-color: var(--cs-blue-05);
            color: var(--cs-slate);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px;
        }

        .grid {
            display: grid;
            gap: 24px;
        }

        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .card-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--cs-navy-12);
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--cs-navy);
        }

        .card-content {
            padding: 24px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            background: white;
            padding: 24px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 24px;
        }

        .badge {
            background-color: var(--cs-blue);
            color: white;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 18px;
            font-weight: 500;
        }

        .icon-outline {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid var(--cs-blue);
            color: var(--cs-blue);
            flex-shrink: 0;
            font-size: 16px;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
        }

        .grid-4 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .grid-5 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
        }

        .stat-card {
            text-align: center;
            padding: 16px;
            border-radius: 8px;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 14px;
            color: rgba(52, 55, 65, 0.75);
            margin-bottom: 8px;
        }

        .stat-detail {
            font-size: 12px;
            color: rgba(52, 55, 65, 0.6);
        }

        .improvement-delta {
            font-weight: 600;
            font-size: 16px;
            color: #009CDE;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        .table thead tr {
            border-bottom: 2px solid #009CDE;
        }

        .table th {
            padding: 12px 8px;
            font-weight: 600;
        }

        .table td {
            padding: 12px 8px;
            border-top: 1px solid rgba(0, 76, 151, 0.12);
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-better {
            background-color: rgba(0, 156, 222, 0.2);
            color: #004C97;
        }

        .status-worse {
            background-color: rgba(255, 106, 20, 0.2);
            color: #FF6A14;
        }

        .chart-container {
            position: relative;
            height: 250px;
            margin-top: 16px;
        }

        .chart-legend {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-top: 16px;
            font-size: 14px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 32px;
            height: 4px;
        }

        .info-box {
            padding: 12px;
            border-radius: 6px;
            font-size: 12px;
            margin-top: 12px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .summary-item {
            padding-left: 12px;
            border-left: 4px solid #009CDE;
        }

        .summary-title {
            font-weight: 600;
            color: #009CDE;
            font-size: 14px;
        }

        .summary-value {
            color: rgba(52, 55, 65, 0.75);
            font-size: 14px;
        }

        .product-item, .method-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background-color: rgba(0, 156, 222, 0.05);
            border-radius: 6px;
            margin-bottom: 12px;
        }

        .percentage-circle {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 700;
            color: white;
        }

        .improvement-item {
            border-radius: 6px;
            margin-bottom: 16px;
            padding: 16px;
            border: 1px solid rgba(0, 76, 151, 0.12);
        }

        .priority-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 4px;
            color: white;
            font-size: 12px;
            font-weight: 700;
        }

        .priority-high {
            background-color: var(--cs-red);
        }

        .priority-medium {
            background-color: var(--cs-orange);
        }

        .priority-low {
            background-color: var(--cs-blue);
        }

        .value-item {
            display: flex;
            align-items: start;
            gap: 12px;
            padding: 8px;
            background: white;
            border-radius: 6px;
        }

        .footer {
            background: white;
            padding: 16px;
            border-radius: 8px;
            font-size: 12px;
            color: rgba(52, 55, 65, 0.75);
            margin-top: 24px;
        }

        .cost-avoidance-card {
            background: linear-gradient(to bottom right, rgba(0, 156, 222, 0.15), rgba(0, 76, 151, 0.1));
            border: 2px solid #009CDE;
        }

        .cost-component {
            background: white;
            padding: 16px;
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .highlight-box {
            background-color: rgba(0, 156, 222, 0.1);
            border: 1px solid #009CDE;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 16px;
        }

          .card-subtitle {
              margin-top: 4px;
              font-size: 14px;
              color: rgba(52, 55, 65, 0.75);
          }

          .detection-quality-card .card-content {
              padding: 32px;
          }

          .detection-quality-layout {
              display: grid;
              grid-template-columns: minmax(0, 1fr);
              gap: 28px;
              align-items: start;
          }

          .detection-metric-grid {
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
              gap: 16px;
          }

          .detection-metric {
              border: 1px solid rgba(0, 76, 151, 0.12);
              border-radius: 12px;
              padding: 16px 18px;
              background-color: rgba(0, 156, 222, 0.05);
          }

          .detection-metric-critical {
              background-color: rgba(239, 51, 64, 0.08);
              border-color: rgba(239, 51, 64, 0.25);
          }

          .detection-metric-warning {
              background-color: rgba(255, 106, 20, 0.08);
              border-color: rgba(255, 106, 20, 0.25);
          }

          .detection-metric-positive {
              background-color: rgba(0, 156, 222, 0.08);
              border-color: rgba(0, 156, 222, 0.25);
          }

          .detection-metric-label {
              font-size: 12px;
              text-transform: uppercase;
              letter-spacing: 0.06em;
              color: rgba(52, 55, 65, 0.75);
              margin-bottom: 6px;
          }

          .detection-metric-value {
              font-size: 28px;
              font-weight: 700;
              color: #343741;
              margin-bottom: 6px;
          }

          .detection-metric-detail {
              font-size: 12px;
              color: rgba(52, 55, 65, 0.75);
          }

          .detection-metric-trend {
              font-size: 12px;
              color: #004C97;
              margin-top: 6px;
              font-weight: 500;
          }

          .detection-insight-list {
              display: grid;
              gap: 16px;
              margin-top: 24px;
          }

          .detection-insight {
              display: grid;
              grid-template-columns: 12px auto;
              gap: 12px;
              align-items: start;
          }

          .detection-insight-dot {
              width: 12px;
              height: 12px;
              border-radius: 50%;
              margin-top: 4px;
          }

          .detection-insight-title {
              font-weight: 600;
              color: #343741;
              font-size: 14px;
              margin-bottom: 4px;
          }

          .detection-insight-text {
              font-size: 13px;
              color: rgba(52, 55, 65, 0.75);
              line-height: 1.6;
          }

          .legend-dot {
              width: 12px;
              height: 12px;
              border-radius: 50%;
              flex-shrink: 0;
          }

          .detection-footnote {
              font-size: 11px;
              color: rgba(52, 55, 65, 0.6);
              margin-top: 24px;
              font-style: italic;
          }

        .severity-card .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 16px;
        }

        .severity-card .card-content {
            padding: 28px;
        }

        .severity-card-body {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 28px;
            align-items: stretch;
        }

        .severity-chip {
            background-color: rgba(0, 156, 222, 0.12);
            color: #004C97;
            font-weight: 600;
            font-size: 14px;
            padding: 6px 14px;
            border-radius: 999px;
            border: 1px solid rgba(0, 76, 151, 0.15);
        }

        .severity-flow-panel {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .severity-flow-panel p {
            font-size: 14px;
            color: rgba(52, 55, 65, 0.8);
            line-height: 1.6;
        }

        .severity-flow-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px;
        }

        .flow-stat {
            border: 1px solid rgba(0, 76, 151, 0.12);
            border-radius: 10px;
            padding: 12px 14px;
            background-color: rgba(0, 156, 222, 0.05);
        }

        .flow-stat[data-accent="critical"] {
            background-color: rgba(239, 51, 64, 0.08);
            border-color: rgba(239, 51, 64, 0.25);
        }

        .flow-stat[data-accent="warning"] {
            background-color: rgba(255, 106, 20, 0.08);
            border-color: rgba(255, 106, 20, 0.25);
        }

        .flow-stat-value {
            font-size: 28px;
            font-weight: 700;
            color: #343741;
            line-height: 1.1;
        }

        .flow-stat-label {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: rgba(52, 55, 65, 0.75);
        }

        .severity-flow-insights {
            display: grid;
            gap: 10px;
            margin: 0;
            padding: 0;
        }

        .severity-flow-insights li {
            list-style: none;
            display: grid;
            grid-template-columns: 10px auto;
            gap: 10px;
            color: rgba(52, 55, 65, 0.85);
            font-size: 13px;
        }

        .severity-flow-insights li::before {
            content: '';
            display: block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-top: 6px;
            background-color: #009CDE;
        }

        .severity-flow-insights li[data-accent="lift"]::before {
            background-color: #EF3340;
        }

        .severity-flow-insights li[data-accent="lower"]::before {
            background-color: #9CA3AF;
        }

        .sankey-chart-wrapper {
            min-height: 320px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .sankey-chart-container {
            flex: 1;
            position: relative;
            min-height: 320px;
        }

        .sankey-chart-container canvas {
            width: 100% !important;
            height: 100% !important;
        }

        .sankey-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            font-size: 13px;
            color: rgba(52, 55, 65, 0.85);
        }

        .sankey-legend .legend-item {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .card-footnote {
            font-size: 11px;
            color: rgba(52, 55, 65, 0.6);
            font-style: italic;
            margin-top: 12px;
        }

        /* ============================================================================
           RESPONSIVE BREAKPOINTS
           ============================================================================
           BUSINESS CONTEXT: Report must be readable on tablets and desktop screens.
           Mobile view is not a primary use case (reports are typically viewed in
           business review meetings on larger screens).
           
           BREAKPOINT: 1024px - Tablet/Desktop boundary
           - Below 1024px: Detection quality section stacks vertically for readability
           - Above 1024px: Side-by-side layout for executive dashboard view
           ============================================================================ */
        @media (max-width: 1024px) {
            .detection-quality-layout {
                grid-template-columns: 1fr;
            }
        }

        /* Hero Impact Section */
        .hero-section {
            background: linear-gradient(135deg, #009CDE 0%, #004C97 100%);
            border-radius: 12px;
            padding: 48px 32px;
            margin-bottom: 48px;
            box-shadow: 0 4px 12px rgba(0, 76, 151, 0.15);
        }

        .hero-title {
            color: white;
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 8px;
            text-align: center;
        }

        .hero-subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            text-align: center;
            margin-bottom: 40px;
        }

        .hero-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
        }

        .hero-metric {
            text-align: center;
            padding: 32px 24px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .hero-number {
            font-size: 64px;
            font-weight: 700;
            color: white;
            line-height: 1;
            margin-bottom: 12px;
        }

        .hero-label {
            font-size: 18px;
            font-weight: 500;
            color: white;
            margin-bottom: 8px;
        }

        .hero-context {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.5;
        }

        /* Tier spacing */
        .tier-1-spacing {
            margin-bottom: 48px;
        }

        .tier-2-spacing {
            margin-bottom: 32px;
        }

        /* ============================================================================
           PRINT STYLING
           ============================================================================
           BUSINESS CONTEXT: Reports may be printed for executive handouts or archival.
           Print styles ensure cards don't break across pages awkwardly.
           ============================================================================ */
        @media print {
            .container {
                max-width: 100%;
            }
            .card {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <!-- ============================================================================
         REPORT STRUCTURE OVERVIEW
         ============================================================================
         BUSINESS CONTEXT: This report follows a 4-tier hierarchy designed for
         executive consumption, with the most important client-facing value at the top.
         
         TIER 1: Hero Impact Section
         - Purpose: Immediate value demonstration for executives
         - Audience: C-suite, CISOs, Security Leadership
         - Content: Hours delivered, alerts resolved, coverage, compliance
         
         TIER 2: Performance & Trust Zone
         - Purpose: Build trust through trend analysis and benchmarking
         - Audience: Security Leadership, SOC Managers
         - Content: 3-month trends, target metrics, industry comparison
         
         TIER 3: Coverage & Capability Zone
         - Purpose: Demonstrate operational value and detection quality
         - Audience: SOC Managers, Security Leadership
         - Content: Value delivered, detection sources, escalation methods, after-hours coverage
         
         TIER 4: Technical Detail Zone
         - Purpose: Deep-dive metrics for operational improvement
         - Audience: SOC Managers, Analysts
         - Content: Response efficiency, collaboration quality, detection quality, threat landscape
         ============================================================================ -->
    <div class="container">
        <!-- ========================================================================
             REPORT HEADER
             ========================================================================
             BUSINESS CONTEXT: Header establishes report identity, client context,
             and reporting period. Critical for multi-client report generation.
             
             [DYNAMIC] Client name, period dates, and tier level must be populated
             from CORR platform or configuration.
             
             DATA SOURCES:
             - Client name: CORR platform client configuration
             - Period dates: User-selected date range or default period
             - Tier level: Client subscription tier (Signature, etc.)
             ======================================================================== -->
        <div class="header">
                <div>
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQwIiBoZWlnaHQ9IjUyIiB2aWV3Qm94PSIwIDAgMjQwIDUyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHJvbGU9ImltZyIgYXJpYS1sYWJlbGxlZGJ5PSJjc0xvZ29UaXRsZSBjc0xvZ29EZXNjIj4KICA8dGl0bGUgaWQ9ImNzTG9nb1RpdGxlIj5Dcml0aWNhbCBTdGFydCBQcmltYXJ5IExvZ288L3RpdGxlPgogIDxkZXNjIGlkPSJjc0xvZ29EZXNjIj5Xb3JkbWFyayBzaG93aW5nIENyaXRpY2FsIFN0YXJ0IHdpdGggdGhlIENyaXRpY2FsIHBvcnRpb24gaW4gbmF2eSBhbmQgU3RhcnQgaW4gcmVkIG92ZXIgYSBibHVlIGdyYWRpZW50IGJhc2VsaW5lLjwvZGVzYz4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iY3NHcmFkaWVudCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjMDA5Q0RFIiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDRDOTciIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8cmVjdCB4PSIwIiB5PSI0NCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSI0IiBmaWxsPSJ1cmwoI2NzR3JhZGllbnQpIiByeD0iMiIgLz4KICA8dGV4dCB4PSIwIiB5PSIzNCIgZm9udC1mYW1pbHk9IidSb2JvdG8nLCAnQXJpYWwgQmxhY2snLCBzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iNzAwIiBmb250LXNpemU9IjM0IiBmaWxsPSIjMDA0Qzk3IiBsZXR0ZXItc3BhY2luZz0iMiI+CiAgICBDUklUSUNBTAogIDwvdGV4dD4KICA8dGV4dCB4PSIxNTIiIHk9IjM0IiBmb250LWZhbWlseT0iJ1JvYm90bycsICdBcmlhbCBCbGFjaycsIHNhbnMtc2VyaWYiIGZvbnQtd2VpZ2h0PSI3MDAiIGZvbnQtc2l6ZT0iMzQiIGZpbGw9IiNFRjMzNDAiIGxldHRlci1zcGFjaW5nPSIyIj4KICAgIFNUQVJUCiAgPC90ZXh0PgogIDx0ZXh0IHg9IjIyNiIgeT0iMTgiIGZvbnQtZmFtaWx5PSInUm9ib3RvJywgJ0FyaWFsJywgc2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9IjcwMCIgZm9udC1zaXplPSIxNCIgZmlsbD0iI0VGMzM0MCI+CiAgICDCrgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="Critical Start logo" style="width: 160px; height: auto; margin-bottom: 16px;">
                <h1 style="font-size: 24px; font-weight: 700; color: #004C97; margin-bottom: 8px;">
                    Escalation to Client Details Report — Signature Tier
                </h1>
                <!-- [EXAMPLE DATA] Client name - Replace with dynamic client from CORR -->
                <p style="font-weight: 600; color: #343741; margin-bottom: 4px;">Lennar Corporation</p>
                <!-- [DYNAMIC] Period dates - Must be calculated from selected date range -->
                <p style="color: rgba(52, 55, 65, 0.75); font-size: 14px;">Period: August 1-31, 2025 (31 days)</p>
                <p style="color: rgba(52, 55, 65, 0.6); font-size: 12px;">Production incidents escalated to client. Rolling 90-day benchmarks from the Cyber Operations Risk & Response&trade; (CORR) platform.</p>
            </div>
        </div>

        <!-- ========================================================================
             TIER 1: HERO IMPACT SECTION
             ========================================================================
             BUSINESS CONTEXT: This is the most important section for executive
             consumption. It immediately demonstrates value delivered and sets the
             narrative for the entire report. Designed to answer "What did we get
             for our investment?" at a glance.
             
             AUDIENCE: Primary - C-suite executives, CISOs
             PURPOSE: Drive renewals by quantifying operational value
             
             METRICS DISPLAYED:
             1. Hours of Expert Analysis - Labor hours saved (value calculation)
             2. Alerts Resolved - Noise reduction (operational efficiency)
             3. Coverage Provided - 24/7 protection demonstration
             4. Target Compliance - Service level achievement
             
             [DYNAMIC] All values must be calculated from CORR platform data
             [EXAMPLE] Current values are wireframe/example data
             ======================================================================== -->
        <div class="hero-section tier-1-spacing">
            <h2 class="hero-title">What We Delivered This Period</h2>
            <p class="hero-subtitle">Real protection, measurable outcomes.</p>
            
            <div class="hero-grid">
                <!-- [EXAMPLE DATA] Hours of Expert Analysis - Calculate from CORR analyst utilization -->
                <div class="hero-metric">
                    <div class="hero-number">452</div>
                    <div class="hero-label">Hours of Expert Analysis</div>
                    <div class="hero-context">Security operations your team didn't have to staff</div>
                </div>
                
                <!-- [EXAMPLE DATA] Alerts Resolved - Sum of non-escalated alerts from CORR -->
                <div class="hero-metric">
                    <div class="hero-number">1,843</div>
                    <div class="hero-label">Alerts Resolved</div>
                    <div class="hero-context">Handled by the Critical Start Security Operations Center (CS SOC) without escalation—noise filtered so you could focus</div>
                </div>
                
                <!-- [DYNAMIC] Coverage Provided - Calculate from period duration -->
                <div class="hero-metric">
                    <div class="hero-number">24/7</div>
                    <div class="hero-label">Coverage Provided</div>
                    <div class="hero-context">744 hours of continuous monitoring and response</div>
                </div>
                
                <!-- [DYNAMIC] Target Compliance - Calculate from response time targets vs. actuals -->
                <div class="hero-metric">
                    <div class="hero-number">88%</div>
                    <div class="hero-label">Target Compliance</div>
                    <div class="hero-context">Response targets met across all incident severities</div>
                </div>
            </div>
            <p style="font-size: 12px; color: rgba(255, 255, 255, 0.8); margin-top: 32px; text-align: center; font-style: italic;">
                Sources: Cyber Operations Risk & Response&trade; (CORR) platform — Analyst Utilization & Coverage metadata; Report Extract — Incident Id (col 1), Escalated Datetime (US/Central) (col 20), CS SOC Time to Respond (TTR) (hh:mm) (col 37).
            </p>
        </div>

        <!-- ========================================================================
             EXECUTIVE SUMMARY
             ========================================================================
             BUSINESS CONTEXT: Provides high-level narrative summary of the reporting
             period. Balances positive outcomes (threats contained) with transparency
             (false positive rate, incident volume). Designed for executive scanning.
             
             AUDIENCE: Primary - C-suite, CISOs; Secondary - Security Leadership
             PURPOSE: Set context and key takeaways before detailed metrics
             
             KEY METRICS:
             - Total incidents escalated (primary operational load indicator)
             - Daily average (helps executives understand frequency)
             - Non-escalated alerts (demonstrates noise reduction)
             - Period highlights (narrative summary)
             
             DATA SOURCES:
             - Incident count: Report Extract - Incident Id (col 1)
             - CS SOC Verdict: Report Extract (col 12) for true positive identification
             - Escalated Datetime: Report Extract (col 20) for period calculations
             ======================================================================== -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Executive Summary</h2>
            </div>
            <div class="card-content">
                <div style="margin-bottom: 16px;">
                    <!-- [EXAMPLE DATA] Total incidents - Count from Report Extract col 1 -->
                    <p style="font-size: 32px; font-weight: 700; color: #343741;">267 Incidents Escalated</p>
                    <!-- [DYNAMIC] Daily average - Calculate: total incidents / period days -->
                    <p style="color: rgba(52, 55, 65, 0.75);">Average 8.9 per day requiring your team's attention</p>
                    <!-- [EXAMPLE DATA] Non-escalated alerts - From CORR platform metadata -->
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.6); margin-top: 4px;">
                        Additionally: 1,843 alerts resolved by CS SOC without escalation (59.5 per day)
                    </p>
                </div>
                
                <div class="highlight-box">
                    <p style="font-weight: 600; color: #004C97; margin-bottom: 8px;">Period Highlights</p>
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8); line-height: 1.7;">
                        Your security posture remained strong this reporting period. We maintained 88% target compliance across all incident severities, with 90th percentile response time at 87 minutes. Of the 267 incidents escalated, we identified 11 true positive threats and contained them before business impact. False positive rate held at 9.0%, reflecting our ongoing commitment to signal over noise.
                    </p>
                </div>

                <div class="summary-grid">
                    <div class="summary-item">
                        <p class="summary-title">Threat Outcomes</p>
                        <p class="summary-value">11 threats contained, zero breaches</p>
                    </div>
                    <div class="summary-item">
                        <p class="summary-title">24/7 Protection</p>
                        <p class="summary-value">49% handled after-hours</p>
                    </div>
                    <div class="summary-item">
                        <p class="summary-title">Detection Quality</p>
                        <p class="summary-value">9.0% false positive rate</p>
                    </div>
                </div>
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 16px; font-style: italic;">
                    Sources: Report Extract — Incident Id (col 1), CS SOC Verdict (col 12), Escalated Datetime (US/Central) (col 20); Cyber Operations Risk & Response&trade; (CORR) platform — Non-escalated alert volume.
                </p>
            </div>
        </div>

        <!-- ========================================================================
             TIER 2: PERFORMANCE & TRUST ZONE
             ========================================================================
             BUSINESS CONTEXT: Builds trust through trend analysis and external
             benchmarking. Demonstrates continuous improvement and competitive
             positioning. Critical for renewal conversations.
             
             AUDIENCE: Security Leadership, SOC Managers, Executives
             PURPOSE: Demonstrate improvement trajectory and industry competitiveness
             ======================================================================== -->
        
        <!-- ========================================================================
             3-MONTH PERFORMANCE TREND CHART
             ========================================================================
             BUSINESS CONTEXT: Shows improvement trajectory across three key metrics
             over three reporting periods. Demonstrates maturation and tuning effectiveness.
             
             METRICS DISPLAYED:
             - Mean Time to Respond (MTTR): Left axis, minutes
             - Mean Time to Detect (MTTD): Left axis, minutes  
             - False Positive %: Right axis, percentage
             
             DATA SOURCE: CORR platform rolling 90-day averages
             [DYNAMIC] Period labels and data points must be calculated from CORR
             [EXAMPLE] Current data is wireframe example
             ======================================================================== -->
        <div class="card tier-2-spacing">
            <div class="card-header">
                <h2 class="card-title">Getting Better Every Period</h2>
            </div>
            <div class="card-content">
                <!-- [TODO] Chart initialization handled in JavaScript section -->
                <div class="chart-container">
                    <canvas id="trendChart"></canvas>
                </div>
                <div class="chart-legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #009CDE;"></div>
                        <span>Mean Time to Respond (MTTR)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #004C97;"></div>
                        <span>Mean Time to Detect (MTTD)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #EF3340; border: 2px dashed #EF3340; background: none;"></div>
                        <span>False Positive %</span>
                    </div>
                </div>
                <div class="info-box" style="background-color: rgba(0, 156, 222, 0.1);">
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8);">
                        <strong>Trend Analysis:</strong> Continuous improvement across all metrics. Mean Time to Respond (MTTR) decreased 25% to 126 minutes, while Mean Time to Detect (MTTD) improved 22% to 42 minutes, and false positive rate dropped 24% over three periods, demonstrating effective tuning and process maturation.
                    </p>
                </div>
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 8px; font-style: italic;">Data source: Cyber Operations Risk & Response&trade; (CORR) platform rolling 90-day averages</p>
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 4px; font-style: italic;">Visualization note: Mean Time to Respond (MTTR) and Mean Time to Detect (MTTD) render on the left axis in minutes; False Positive % renders on the right axis.</p>
            </div>
        </div>

        <!-- INCIDENT SPOTLIGHT - NEW -->

        <!-- ========================================================================
             TARGET METRICS CARDS
             ========================================================================
             BUSINESS CONTEXT: Displays key performance indicators against defined
             targets. P90 (90th percentile) is the primary SLA metric for response time.
             
             METRICS:
             1. P90 Response Time - Primary SLA metric (target < 90 minutes)
             2. Critical/High Priority MTTR - High-severity incidents
             3. Medium/Low MTTR - Lower-severity incidents
             4. Mean Time to Detect (MTTD) - Detection speed
             
             BUSINESS RULES:
             - P90 target: < 90 minutes (90th percentile of all response times)
             - MTTR targets: < 90 minutes for all priority levels
             - MTTD target: < 15 minutes
             
             DATA SOURCES:
             - Response times: Report Extract - CS SOC Time to Respond (TTR) (col 37)
             - Priority levels: Report Extract - Current Priority (col 13)
             ======================================================================== -->
        <div class="grid-4">
            <!-- [DYNAMIC] P90 Response Time - Calculate 90th percentile from col 37 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" style="font-size: 14px;">90th Percentile (P90) Response Time</h3>
                </div>
                <div class="card-content">
                    <!-- [EXAMPLE DATA] P90 value - Calculate from actual response times -->
                    <p class="stat-value" style="color: #343741;">87m</p>
                    <!-- [DYNAMIC] Improvement delta - Compare to 90-day rolling average -->
                    <p class="improvement-delta">↓ 25% vs 90-day avg</p>
                    <p class="stat-detail" style="margin-top: 8px;">Target &lt; 90m | 90th percentile</p>
                    <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75); margin-top: 4px; font-style: italic;">CS SOC Time to Respond (TTR) (col 37)</p>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" style="font-size: 14px;">Critical/High Priority MTTR</h3>
                </div>
                <div class="card-content">
                    <p class="stat-value" style="color: #343741;">67 min</p>
                    <p class="improvement-delta">↓ 4% improvement</p>
                    <p class="stat-detail" style="margin-top: 8px;">Target &lt; 90m | n=132</p>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" style="font-size: 14px;">Medium/Low MTTR</h3>
                </div>
                <div class="card-content">
                    <p class="stat-value" style="color: #343741;">52 min</p>
                    <p class="improvement-delta">↓ 18% improvement</p>
                    <p class="stat-detail" style="margin-top: 8px;">Target &lt; 90m | n=135</p>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" style="font-size: 14px;">Mean Time to Detect (MTTD)</h3>
                </div>
                <div class="card-content">
                    <p class="stat-value" style="color: #343741;">4 min</p>
                    <p class="improvement-delta">↓ 12% improvement</p>
                    <p class="stat-detail" style="margin-top: 8px;">Target &lt; 15m | n=267</p>
                </div>
            </div>
        </div>

        <!-- Industry Comparison -->
        <div class="card tier-2-spacing">
            <div class="card-header">
                <h2 class="card-title">Industry Comparison</h2>
            </div>
            <div class="card-content">
                <table class="table">
                    <thead>
                        <tr>
                            <th style="text-align: left;">Metric</th>
                            <th style="text-align: center;">Your Performance</th>
                            <th style="text-align: center;">Industry Average</th>
                            <th style="text-align: center;">Difference</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="font-weight: 500;">MTTR (minutes)</td>
                            <td style="text-align: center; font-weight: 700;">126</td>
                            <td style="text-align: center;">192</td>
                            <td style="text-align: center;">
                                <span class="status-badge status-better">34% Better</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="font-weight: 500;">MTTD (minutes)</td>
                            <td style="text-align: center; font-weight: 700;">42</td>
                            <td style="text-align: center;">66</td>
                            <td style="text-align: center;">
                                <span class="status-badge status-better">36% Better</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="font-weight: 500;">Incidents/Day</td>
                            <td style="text-align: center; font-weight: 700;">8.9</td>
                            <td style="text-align: center;">11.4</td>
                            <td style="text-align: center;">
                                <span class="status-badge status-better">22% Better</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 12px;">Benchmarks: SANS Institute 2024 Security Operations Center (SOC) Survey (Construction & Real Estate cohort), published averages converted to minutes.</p>
            </div>
        </div>

        <!-- ========================================================================
             TIER 3: COVERAGE & CAPABILITY ZONE
             ========================================================================
             BUSINESS CONTEXT: Demonstrates operational value and detection capabilities.
             Focuses on "what we delivered" from a capability and cost-avoidance perspective.
             
             AUDIENCE: Security Leadership, SOC Managers, Executives
             PURPOSE: Quantify value delivered and demonstrate detection quality
             ======================================================================== -->
        
        <!-- ========================================================================
             VALUE DELIVERED - COST AVOIDANCE CALCULATION
             ========================================================================
             BUSINESS CONTEXT: Quantifies the financial value of MDR services through
             three components: operations labor, 24/7 coverage, and threat prevention.
             Critical for renewal conversations and ROI demonstration.
             
             CALCULATION METHODOLOGY:
             1. Security Operations: Analyst hours × loaded hourly rate
             2. 24/7 Coverage: Full-time SOC analyst cost × coverage ratio
             3. Threat Prevention: Contained threats × breach cost × probability factor
             
             BUSINESS RULES:
             - Operations: 452 hours × $85/hr loaded cost = $38K
             - Coverage: $110K annual analyst cost × coverage ratio = $163K
             - Threat Prevention: 11 threats × $4.45M breach cost × 15% = $7.34M
             
             [DYNAMIC] All values must be calculated from actual data
             [EXAMPLE] Current values use example data and configurable rates
             ======================================================================== -->
        <div class="card cost-avoidance-card">
            <div class="card-header">
                <h2 class="card-title">Value Delivered This Period</h2>
            </div>
            <div class="card-content">
                <div style="text-align: center; margin-bottom: 24px;">
                    <!-- [EXAMPLE DATA] Total value - Sum of three components -->
                    <p style="font-size: 48px; font-weight: 700; color: #004C97;">$7.55M</p>
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75); margin-top: 8px;">Combined security operations and threat prevention value</p>
                </div>
                
                <div class="grid-3">
                    <div class="cost-component">
                        <p class="stat-label" style="font-weight: 600; margin-bottom: 4px;">Security Operations</p>
                        <p style="font-size: 24px; font-weight: 700; color: #004C97;">$38K</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75); margin-top: 8px;">452 hours of expert analysis</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">Labor your team didn't have to provide</p>
                    </div>
                    
                    <div class="cost-component">
                        <p class="stat-label" style="font-weight: 600; margin-bottom: 4px;">24/7 Coverage</p>
                        <p style="font-size: 24px; font-weight: 700; color: #004C97;">$163K</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75); margin-top: 8px;">744 hours of continuous protection</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">vs. internal 24/7 Security Operations Center (SOC) staffing</p>
                    </div>
                    
                    <div class="cost-component">
                        <p class="stat-label" style="font-weight: 600; margin-bottom: 4px;">Threat Prevention</p>
                        <p style="font-size: 24px; font-weight: 700; color: #004C97;">$7.34M</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75); margin-top: 8px;">11 threats contained</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">Conservative breach cost model</p>
                    </div>
                </div>

                <div class="info-box" style="background: white; border: 1px solid #009CDE;">
                    <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">
                        <strong>Methodology:</strong> Operations value: 452 analyst hours × $85/hr loaded cost. Coverage value: Full-time Security Operations Center (SOC) analyst cost ($110K annually) × coverage ratio. Threat prevention: Contained threats × industry average breach cost ($4.45M) × conservative probability factor (15%). All calculations use industry-standard benchmarks and are configurable.
                    </p>
                </div>
            </div>
        </div>

        <!-- ========================================================================
             DETECTION SOURCES & QUALITY
             ========================================================================
             BUSINESS CONTEXT: Shows which security products are generating escalations
             and their false positive rates. Helps identify tuning opportunities and
             demonstrates detection source diversity.
             
             METRICS:
             - Product name and incident count
             - Percentage of total incidents
             - False positive rate per product
             
             BUSINESS RULE: False positive rate threshold is 10.0% per product
             Products exceeding threshold trigger improvement recommendations
             
             DATA SOURCES:
             - Product: Report Extract - Product (col 7)
             - Verdict: Report Extract - CS SOC Verdict (col 12) for FP calculation
             
             [DYNAMIC] Product list and counts must be aggregated from Report Extract
             [EXAMPLE] Current products and rates are example data
             ======================================================================== -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Detection Sources & Quality</h2>
            </div>
            <div class="card-content">
                    <!-- [EXAMPLE DATA] Product breakdown - Aggregate from col 7, calculate FP rate from col 12 -->
                    <div class="product-item">
                        <div>
                            <p style="font-weight: 600; color: #343741;">Palo Alto Cortex XDR (Extended Detection and Response)</p>
                        <!-- [DYNAMIC] Incident count and percentage - Calculate from Report Extract -->
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">189 incidents (70.8% of total)</p>
                    </div>
                    <div style="text-align: right;">
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">False Positive Rate</p>
                        <!-- [DYNAMIC] FP rate - Calculate: (FP count / total incidents for product) × 100 -->
                        <!-- [TODO] Color coding: Orange if > 10% threshold, Blue if <= 10% -->
                        <p style="font-size: 20px; font-weight: 700; color: #FF6A14;">11.2%</p>
                    </div>
                </div>
                <div class="product-item">
                    <div>
                        <p style="font-weight: 600; color: #343741;">Microsoft Sentinel</p>
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">52 incidents (19.5% of total)</p>
                    </div>
                    <div style="text-align: right;">
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">False Positive Rate</p>
                        <p style="font-size: 20px; font-weight: 700; color: #009CDE;">5.8%</p>
                    </div>
                </div>
                <div class="product-item">
                    <div>
                        <p style="font-weight: 600; color: #343741;">CrowdStrike Falcon</p>
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">26 incidents (9.7% of total)</p>
                    </div>
                    <div style="text-align: right;">
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">False Positive Rate</p>
                        <p style="font-size: 20px; font-weight: 700; color: #009CDE;">7.7%</p>
                    </div>
                </div>
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); font-style: italic; margin-top: 12px;">Source: Excel Extract columns 7 (Product) and 12 (CS SOC Verdict)</p>
            </div>
        </div>

        <!-- ========================================================================
             ESCALATION METHODS
             ========================================================================
             BUSINESS CONTEXT: Shows how incidents reach the client - automated
             playbook vs. analyst-driven. Demonstrates automation maturity and
             identifies opportunities for playbook expansion.
             
             METRICS:
             - Playbook (Automated): Rule-based automated escalations
             - CS SOC (Analyst Escalation): Human judgment required
             
             BUSINESS RULE: Target is 12% or less for manual escalations
             Exceeding 12% triggers automation opportunity recommendation
             
             DATA SOURCE: Report Extract - Initial Escalation Method (col 9)
             
             [DYNAMIC] Percentages and counts must be calculated from col 9
             [EXAMPLE] Current values are wireframe data
             ======================================================================== -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">How Incidents Reach You</h2>
            </div>
            <div class="card-content">
                <!-- [DYNAMIC] Playbook percentage - Count "Playbook" in col 9, calculate percentage -->
                <div class="method-item">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div class="percentage-circle" style="background-color: #009CDE;">86%</div>
                        <div>
                            <p style="font-weight: 600; color: #343741;">Playbook (Automated)</p>
                            <!-- [EXAMPLE DATA] Incident count - Count from col 9 -->
                            <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">229 incidents</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); font-style: italic;">Rule-based automated escalation</p>
                        </div>
                    </div>
                </div>
                <!-- [DYNAMIC] Analyst escalation percentage - Count "CS SOC" in col 9, calculate percentage -->
                <div class="method-item">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div class="percentage-circle" style="background-color: #FF6A14;">14%</div>
                        <div>
                            <p style="font-weight: 600; color: #343741;">CS SOC (Analyst Escalation)</p>
                            <!-- [EXAMPLE DATA] Incident count - Count from col 9 -->
                            <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">38 incidents</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); font-style: italic;">Analyst-driven escalation requiring human judgment</p>
                        </div>
                    </div>
                </div>
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); font-style: italic; margin-top: 12px;">Source: Excel Extract column 9 (Initial Escalation Method)</p>
            </div>
        </div>

        <!-- Operational Load - UPDATED WITH CLARITY -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">CS SOC Alert Resolution</h2>
            </div>
            <div class="card-content">
                <div class="grid-2">
                    <div style="max-height: 300px; display: flex; align-items: center; justify-content: center;">
                        <canvas id="operationalLoadChart" style="max-height: 280px;"></canvas>
                    </div>
                    <div style="display: flex; flex-direction: column; justify-content: center; gap: 16px;">
                        <div>
                            <p class="stat-label">Business Hours (8am-6pm Mon-Fri)</p>
                            <p style="font-size: 24px; font-weight: 700; color: #009CDE;">
                                51% <span style="font-size: 16px; color: rgba(52, 55, 65, 0.75);">(940 alerts)</span>
                            </p>
                        </div>
                        <div>
                            <p class="stat-label">After Hours (6pm-8am weekdays)</p>
                            <p style="font-size: 24px; font-weight: 700; color: #702F8A;">
                                41% <span style="font-size: 16px; color: rgba(52, 55, 65, 0.75);">(756 alerts)</span>
                            </p>
                        </div>
                        <div>
                            <p class="stat-label">Weekend Coverage</p>
                            <p style="font-size: 24px; font-weight: 700; color: #EF3340;">
                                8% <span style="font-size: 16px; color: rgba(52, 55, 65, 0.75);">(147 alerts)</span>
                            </p>
                        </div>
                        <p class="info-box" style="background-color: rgba(0, 156, 222, 0.15); font-size: 14px;">
                            Our CS SOC team handled 903 alerts outside business hours—protection working while your team isn't.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- After-Hours Customer Calls -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">After-Hours Customer Notifications</h2>
            </div>
            <div class="card-content">
                <div class="highlight-box">
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8);">
                        <strong>High and Critical severity alerts require direct customer notification.</strong> This shows how often your team was contacted outside business hours for urgent threats.
                    </p>
                </div>
                
                <div class="grid-3" style="margin-top: 16px;">
                    <div style="text-align: center; padding: 20px; background: rgba(0, 156, 222, 0.05); border-radius: 8px;">
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75); margin-bottom: 8px;">After Hours Calls</p>
                        <p style="font-size: 32px; font-weight: 700; color: #702F8A; margin-bottom: 4px;">18%</p>
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">136 of 756 alerts</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 8px;">High/Critical requiring immediate attention</p>
                    </div>
                    <div style="text-align: center; padding: 20px; background: rgba(0, 156, 222, 0.05); border-radius: 8px;">
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75); margin-bottom: 8px;">Weekend Calls</p>
                        <p style="font-size: 32px; font-weight: 700; color: #EF3340; margin-bottom: 4px;">15%</p>
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">22 of 147 alerts</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 8px;">High/Critical requiring immediate attention</p>
                    </div>
                    <div style="text-align: center; padding: 20px; background: rgba(0, 156, 222, 0.05); border-radius: 8px;">
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75); margin-bottom: 8px;">Total Off-Hours Calls</p>
                        <p style="font-size: 32px; font-weight: 700; color: #009CDE; margin-bottom: 4px;">158</p>
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">17.5% of off-hours alerts</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 8px;">Your team was notified 5.1 times per day off-hours</p>
                    </div>
                </div>
                
                <div class="info-box" style="background-color: rgba(0, 156, 222, 0.1); margin-top: 16px;">
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8);">
                        <strong>Context:</strong> 82.5% of after-hours alerts (745 alerts) were handled by CS SOC without requiring customer notification, allowing your team to rest while maintaining security coverage. Only high and critical severity incidents required immediate contact.
                    </p>
                </div>
                
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 12px; font-style: italic;">
                    Source: Vendor Severity (col 45), Current Priority (col 13), Escalated Datetime (US/Central) (col 20)
                </p>
            </div>
        </div>



        <!-- ========================================================================
             TIER 4: TECHNICAL DETAIL ZONE
             ========================================================================
             BUSINESS CONTEXT: Deep-dive metrics for operational improvement and
             technical analysis. Used by SOC managers and analysts to identify
             optimization opportunities.
             
             AUDIENCE: SOC Managers, Analysts, Security Leadership
             PURPOSE: Operational metrics for continuous improvement
             ======================================================================== -->
        
        <!-- ========================================================================
             RESPONSE EFFICIENCY
             ========================================================================
             BUSINESS CONTEXT: Measures how effectively incidents are handled.
             Containment rate and automation percentage indicate operational maturity.
             
             METRICS:
             - Containment Rate: Percentage of incidents successfully contained
             - Playbook Automation: Percentage of automated escalations
             - Analyst Escalation: Percentage requiring human judgment
             
             BUSINESS RULE: Containment target is 95%
             
             DATA SOURCES:
             - Containment: Report Extract - Response Action Status (col 36)
             - Automation: Report Extract - Initial Escalation Method (col 9)
             ======================================================================== -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Response Efficiency</h2>
            </div>
            <div class="card-content">
                <div class="grid-3">
                    <!-- [DYNAMIC] Containment rate - Count "Contained" in col 36, calculate percentage -->
                    <div class="stat-card" style="background-color: rgba(0, 156, 222, 0.15);">
                        <p class="stat-label">Containment Rate</p>
                        <!-- [EXAMPLE DATA] Containment percentage - Calculate from col 36 -->
                        <p style="font-size: 36px; font-weight: 700; color: #004C97;">98%</p>
                        <!-- [DYNAMIC] Contained count - Count from col 36 -->
                        <p class="stat-detail">262 of 267 contained</p>
                        <p style="font-size: 11px; color: rgba(52, 55, 65, 0.6); margin-top: 4px;">Response Action Status (col 36)</p>
                    </div>
                    <div class="stat-card" style="background-color: rgba(0, 156, 222, 0.15);">
                        <p class="stat-label">Playbook Automation</p>
                        <p style="font-size: 36px; font-weight: 700; color: #004C97;">86%</p>
                        <p class="stat-detail">Consistent, rule-based escalation</p>
                        <p style="font-size: 11px; color: rgba(52, 55, 65, 0.6); margin-top: 4px;">Initial Escalation Method (col 9)</p>
                    </div>
                    <div class="stat-card" style="background-color: rgba(255, 106, 20, 0.15);">
                        <p class="stat-label">Analyst Escalation</p>
                        <p style="font-size: 36px; font-weight: 700; color: #FF6A14;">14%</p>
                        <p class="stat-detail">Human judgment required</p>
                        <p style="font-size: 11px; color: rgba(52, 55, 65, 0.6); margin-top: 4px;">Initial Escalation Method (col 9)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Customer Engagement -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Collaboration Quality</h2>
            </div>
            <div class="card-content">
                <div class="grid-3">
                    <div style="text-align: center;">
                        <p class="stat-label">Average Touches per Incident</p>
                        <p style="font-size: 32px; font-weight: 700; color: #009CDE;">2.3</p>
                        <p style="font-size: 11px; color: rgba(52, 55, 65, 0.6); margin-top: 4px;">Touched By (col 26)</p>
                    </div>
                    <div style="text-align: center;">
                        <p class="stat-label">Active Client Participation</p>
                        <p style="font-size: 32px; font-weight: 700; color: #009CDE;">72%</p>
                        <p style="font-size: 11px; color: rgba(52, 55, 65, 0.6); margin-top: 4px;">Customer Last Comment (col 29)</p>
                    </div>
                    <div style="text-align: center;">
                        <p class="stat-label">Client-Led Closures</p>
                        <p style="font-size: 32px; font-weight: 700; color: #009CDE;">21%</p>
                        <p style="font-size: 11px; color: rgba(52, 55, 65, 0.6); margin-top: 4px;">Closed By (col 27)</p>
                    </div>
                </div>
                <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75); text-align: center; margin-top: 16px; font-style: italic;">
                    Strong two-way collaboration. High client participation indicates trust and engagement with the CS SOC process.
                </p>
            </div>
        </div>

        <!-- ========================================================================
             DETECTION QUALITY
             ========================================================================
             BUSINESS CONTEXT: Comprehensive view of detection accuracy and signal
             quality. Demonstrates tuning effectiveness and client validation of
             escalations. Critical for building trust in detection capabilities.
             
             METRICS:
             - True Threat Precision: TP / (TP + FP) - Focused adversary detection
             - Signal Fidelity: (TP + BTP) / Total - Actionable escalations
             - False Positive Rate: FP / Total - Target < 10%
             - Client-Validated Outcomes: TBR validations / Total
             
             BUSINESS RULES:
             - False Positive Rate target: < 10%
             - Signal Fidelity indicates alignment with response targets
             
             DATA SOURCES:
             - CS SOC Verdict (col 12): TP, FP, BTP classifications
             - Trusted Behavior Registry (TBR): Client validations
             ======================================================================== -->
        <div class="card detection-quality-card tier-2-spacing">
            <div class="card-header">
                <h2 class="card-title">Detection Quality</h2>
                <p class="card-subtitle">Precision, signal fidelity, and client-validated outcomes across escalations</p>
            </div>
              <div class="card-content">
                  <div class="detection-quality-layout">
                      <div>
                          <div class="detection-metric-grid">
                              <div class="detection-metric detection-metric-critical">
                                  <p class="detection-metric-label">True Threat Precision</p>
                                  <p class="detection-metric-value" style="color: #EF3340;">31.4%</p>
                                  <p class="detection-metric-detail">11 TP ÷ (11 TP + 24 FP)</p>
                                  <p class="detection-metric-trend">Focused adversary detections delivered this period</p>
                              </div>
                              <div class="detection-metric detection-metric-positive">
                                  <p class="detection-metric-label">Signal Fidelity</p>
                                  <p class="detection-metric-value" style="color: #004C97;">91%</p>
                                  <p class="detection-metric-detail">243 actionable escalations (TP + BTP) of 267 total</p>
                                  <p class="detection-metric-trend">Aligned with 88% response target compliance</p>
                              </div>
                                <div class="detection-metric detection-metric-warning">
                                    <p class="detection-metric-label">False Positive Rate</p>
                                    <p class="detection-metric-value" style="color: #FF6A14;">9.0%</p>
                                    <p class="detection-metric-detail">Target &lt; 10% | ↓ 3.1 pts vs prior period</p>
                                    <p class="detection-metric-trend">Only Cortex XDR remains above threshold (11.2%)</p>
                                </div>
                                <div class="detection-metric">
                                    <p class="detection-metric-label">Client-Validated Outcomes</p>
                                    <p class="detection-metric-value" style="color: #009CDE;">86.9%</p>
                                    <p class="detection-metric-detail">Share of escalations your team confirmed as accurate (benign true positives) via the Trusted Behavior Registry&reg; (TBR&reg;)</p>
                                    <p class="detection-metric-trend">Backed by 4 min MTTD and rapid analyst follow-up</p>
                                </div>
                          </div>
                          <div class="info-box" style="background-color: rgba(0, 156, 222, 0.08); border: 1px solid rgba(0, 156, 222, 0.2); margin-top: 20px;">
                              <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8);">
                                    <strong>Key Insights:</strong> Signal quality improved again this period. False positive rate dropped 3.1 points, sustaining 100% containment across 11 true threats.
                              </p>
                          </div>
                      </div>
                  </div>
                    <p class="detection-footnote">Source: CS SOC Verdict (col 12); Trusted Behavior Registry&reg; (TBR&reg;) validations; Report Extract incident counts.</p>
              </div>
        </div>

        <!-- ========================================================================
             SEVERITY ALIGNMENT FLOW (Sankey Diagram)
             ========================================================================
             BUSINESS CONTEXT: Visualizes how Critical Start analysts re-evaluate
             vendor severity ratings. Shows upgrades (raising severity) and
             downgrades (reducing noise). Demonstrates analyst value-add.
             
             VISUALIZATION: Sankey flow diagram showing vendor severity → CS severity
             
             METRICS:
             - Upgraded alerts: Vendor severity raised by CS analysts
             - Downgraded alerts: Vendor severity lowered (noise reduction)
             - Aligned alerts: Severity remained the same
             
             DATA SOURCES:
             - Vendor Severity: Report Extract (col 45)
             - Critical Start Determination: Report Extract - Current Priority (col 13)
             
             [DYNAMIC] Flow data must be calculated by comparing col 45 vs col 13
             [EXAMPLE] Current flow data is wireframe example
             ======================================================================== -->
        <div class="card severity-card tier-2-spacing">
            <div class="card-header">
                <div>
                    <h2 class="card-title">Severity Alignment Flow</h2>
                    <p class="card-subtitle">Vendor-reported criticality vs. Critical Start adjudication</p>
                </div>
                <!-- [DYNAMIC] Total escalations - Count from Report Extract -->
                <span class="severity-chip" data-total-escalations>267 escalations</span>
            </div>
            <div class="card-content">
                <div class="severity-card-body">
                    <div class="severity-flow-panel">
                        <p>
                            Our SOC analysts re-evaluate every vendor alert before escalating. The Sankey view highlights how often Critical Start raises or lowers the raw severity to reflect the real business impact you need to act on.
                        </p>
                        <div class="severity-flow-stats">
                            <div class="flow-stat" data-accent="critical">
                                <div class="flow-stat-value" data-flow-upgraded>0</div>
                                <div class="flow-stat-label">Alerts upgraded</div>
                            </div>
                            <div class="flow-stat" data-accent="warning">
                                <div class="flow-stat-value" data-flow-downgraded>0</div>
                                <div class="flow-stat-label">Alerts de-escalated</div>
                            </div>
                            <div class="flow-stat">
                                <div class="flow-stat-value" data-flow-aligned>0</div>
                                <div class="flow-stat-label">Remained aligned</div>
                            </div>
                        </div>
                        <ul class="severity-flow-insights">
                            <li data-accent="lift"><span data-flow-upgrade-copy>Upgraded alerts ensure true critical issues trigger engagement.</span></li>
                            <li data-accent="lower"><span data-flow-downgrade-copy>De-escalations remove vendor noise before it hits your team.</span></li>
                            <li><span data-flow-dominant-copy>The largest path shows where automation investments will deliver the fastest relief.</span></li>
                        </ul>
                    </div>
                    <div class="sankey-chart-wrapper">
                        <div class="sankey-chart-container">
                            <canvas id="severitySankeyChart"></canvas>
                        </div>
                        <div class="sankey-legend" id="sankeyLegend"></div>
                    </div>
                </div>
                <p class="card-footnote">Source: Vendor Severity (col 45) vs. Critical Start Determination (Current Priority, col 13)</p>
            </div>
        </div>

        <!-- ========================================================================
             THREAT LANDSCAPE BY MITRE ATT&CK TACTIC & SEVERITY
             ========================================================================
             BUSINESS CONTEXT: Shows which adversary tactics are most prevalent and
             their severity distribution. Helps prioritize detection tuning and
             proactive hunting efforts.
             
             VISUALIZATION: Stacked bar chart - Tactics on X-axis, severity on Y-axis
             
             METRICS:
             - MITRE ATT&CK tactic name
             - Severity distribution (High, Medium, Low, Info) per tactic
             
             BUSINESS INSIGHT: Persistence and Defense Evasion tactics with high
             severity suggest sophisticated adversary activity requiring enhanced detection.
             
             DATA SOURCES:
             - MITRE ATT&CK tactic name: Report Extract (col 42)
             - MITRE ATT&CK technique name: Report Extract (col 44)
             - Vendor Severity: Report Extract (col 45)
             
             [DYNAMIC] Data must be aggregated by tactic and severity from Report Extract
             [EXAMPLE] Current chart data is wireframe example
             ======================================================================== -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Threat Landscape by Tactic & Severity</h2>
            </div>
            <div class="card-content">
                <!-- [TODO] Chart initialization handled in JavaScript section -->
                <div class="chart-container" style="height: 280px;">
                    <canvas id="mitreChart"></canvas>
                </div>
                <div class="info-box" style="background-color: rgba(0, 156, 222, 0.1); margin-top: 16px;">
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8);">
                        <strong>Key Insight:</strong> Persistence tactics show the highest concentration of high-severity incidents (12 of 77), suggesting adversaries are attempting to establish foothold. Defense Evasion follows closely. These patterns warrant enhanced detection rules and proactive hunting.
                    </p>
                </div>
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 8px; font-style: italic;">
                    Source: MITRE ATT&amp;CK® tactic name (col 42), MITRE ATT&amp;CK technique name (col 44), Vendor Severity (col 45)
                </p>
            </div>
        </div>

        <!-- ========================================================================
             PRIORITIZED IMPROVEMENT PLAN
             ========================================================================
             BUSINESS CONTEXT: Auto-generated recommendations based on threshold
             analysis. Demonstrates proactive improvement and provides actionable
             next steps. Critical for continuous improvement narrative.
             
             AUTOMATION: Recommendations are automatically generated when metrics
             cross defined thresholds. No manual curation required.
             
             BUSINESS RULES (Thresholds):
             - Source-level false positive rate: 10.0%
             - Manual escalation threshold: 12%
             - Containment target: 95%
             
             RECOMMENDATION STRUCTURE:
             - Priority level (High, Medium, Low)
             - Description with business context
             - Owner assignment
             - Target timeline
             - Expected impact
             
             [DYNAMIC] Recommendations must be auto-generated from threshold analysis
             [EXAMPLE] Current recommendations are wireframe examples
             ======================================================================== -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Prioritized Improvement Plan</h2>
            </div>
            <div class="card-content">
                <div class="highlight-box">
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8);">
                        <strong>Action-Oriented Recommendations:</strong> These improvements are prioritized by impact and auto-generated from threshold analysis. Each includes ownership and target timelines.
                    </p>
                </div>
                
                <!-- Improvement 1: Detection Tuning -->
                <div class="improvement-item" style="border-left: 4px solid #EF3340;">
                    <div style="margin-bottom: 12px;">
                        <span class="priority-badge priority-high">HIGH</span>
                        <span style="font-weight: 600; font-size: 14px; color: #004C97; margin-left: 8px;">Detection Tuning</span>
                    </div>
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8); margin-bottom: 12px;">
                            Palo Alto Cortex XDR false positive rate is 11.2%, exceeding the 10.0% threshold and keeping the overall rate at 9.0%. Tuning these alerts will reduce client noise and improve SOC efficiency.
                        </p>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; font-size: 12px;">
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Owner:</span>
                            <p style="font-weight: 600;">CS SOC + Lennar Security Team</p>
                        </div>
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Target:</span>
                            <p style="font-weight: 600;">Next 30 days</p>
                        </div>
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Expected Impact:</span>
                            <p style="font-weight: 600;">Reduce escalations by ~20%, improve analyst focus</p>
                        </div>
                    </div>
                </div>

                <!-- Improvement 2: Automation -->
                <div class="improvement-item" style="border-left: 4px solid #FF6A14;">
                    <div style="margin-bottom: 12px;">
                        <span class="priority-badge priority-medium">MEDIUM</span>
                        <span style="font-weight: 600; font-size: 14px; color: #004C97; margin-left: 8px;">Automation Opportunity</span>
                    </div>
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8); margin-bottom: 12px;">
                            Manual escalations at 14% exceed our 12% target. 38 incidents required analyst judgment. Expanding playbook coverage will improve consistency.
                        </p>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; font-size: 12px;">
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Owner:</span>
                            <p style="font-weight: 600;">CS SOC Engineering</p>
                        </div>
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Target:</span>
                            <p style="font-weight: 600;">Next 60 days</p>
                        </div>
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Expected Impact:</span>
                            <p style="font-weight: 600;">Reduce manual review burden, faster escalation times</p>
                        </div>
                    </div>
                </div>

                <!-- Improvement 3: Threat Focus -->
                <div class="improvement-item" style="border-left: 4px solid #EF3340;">
                    <div style="margin-bottom: 12px;">
                        <span class="priority-badge priority-high">HIGH</span>
                        <span style="font-weight: 600; font-size: 14px; color: #004C97; margin-left: 8px;">Threat Focus</span>
                    </div>
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8); margin-bottom: 12px;">
                        Persistence and Defense Evasion tactics driving 20 high-severity incidents. These persistence and evasion techniques suggest sophisticated adversary activity requiring enhanced detection.
                    </p>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; font-size: 12px;">
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Owner:</span>
                            <p style="font-weight: 600;">Joint - CS Threat Intel + Lennar</p>
                        </div>
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Target:</span>
                            <p style="font-weight: 600;">Ongoing</p>
                        </div>
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Expected Impact:</span>
                            <p style="font-weight: 600;">Improved detection of advanced threats, reduced dwell time</p>
                        </div>
                    </div>
                </div>

                <div class="info-box" style="background-color: rgba(0, 156, 222, 0.05);">
                    <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">
                        <strong>Recommendation Engine:</strong> These trigger automatically when metrics cross defined thresholds:
                    </p>
                    <ul style="list-style-type: disc; padding-left: 20px; margin-top: 8px; font-size: 12px; color: rgba(52, 55, 65, 0.75);">
                        <li>Source-level false positive rate threshold: 10.0%</li>
                        <li>Manual escalation threshold: 12%</li>
                        <li>Containment target: 95%</li>
                    </ul>
                </div>
            </div>
        </div>


        <!-- Value Delivered - Detailed Breakdown -->
        <div class="card" style="background: linear-gradient(to bottom right, rgba(0, 156, 222, 0.15), rgba(0, 76, 151, 0.1));">
            <div class="card-header">
                <h2 class="card-title">Security Outcomes This Period</h2>
            </div>
            <div class="card-content">
                <p style="font-weight: 600; color: rgba(52, 55, 65, 0.8); margin-bottom: 12px;">Your Managed Detection and Response (MDR) investment delivered measurable security outcomes:</p>
                <div class="grid-2">
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">452 Hours of Expert Analysis</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">Security operations work your team didn't have to staff</p>
                        </div>
                    </div>
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">1,843 Alerts Resolved</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">Noise reduction—87% handled without escalation</p>
                        </div>
                    </div>
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">24/7 Coverage Maintained</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">744 hours of continuous monitoring and response</p>
                        </div>
                    </div>
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">11 Threats Contained</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">True positive threats stopped before business impact</p>
                        </div>
                    </div>
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">88% Target Compliance</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">Response targets met across all incident severities</p>
                        </div>
                    </div>
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">87-Minute 90th Percentile (P90) Response</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">90th percentile incidents resolved under the 90-minute target</p>
                        </div>
                    </div>
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">Zero Breaches</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">No ransomware, no data loss, and no operational disruption</p>
                        </div>
                    </div>
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">9.0% False Positive Rate</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">High signal-to-noise ratio maintained through ongoing tuning</p>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 16px; padding: 12px; background: white; border-radius: 6px;">
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8);">
                        <strong>Looking Ahead:</strong> In the next period we're focused on reducing false positives another 20% through enhanced Palo Alto XDR tuning and expanding playbook automation to push manual escalations down to the 12% target.
                    </p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p style="font-weight: 600; margin-bottom: 4px;">Report Generated: November 5, 2025</p>
        <p style="margin-bottom: 4px;">Data Sources: Excel Escalation Export (45 columns) + Cyber Operations Risk & Response&trade; (CORR) platform (90-day trends and benchmarks)</p>
            <p style="margin-bottom: 4px;">All metrics calculated from source data. Improvement recommendations auto-generated based on configured thresholds.</p>
            <p>Questions? Your Customer Success Manager is here to help.</p>
        </div>
    </div>

    <script>
        /* ============================================================================
           DEVELOPER NOTES - ARCHITECTURE & DATA FLOW
           ============================================================================
           
           REPORT ARCHITECTURE:
           This is a single-page HTML report with embedded CSS and JavaScript.
           Designed for auto-generation from CORR platform data with minimal
           human intervention.
           
           DATA FLOW:
           1. CORR Platform → Excel Export (Report Extract) → 45 columns of incident data
           2. CORR Platform → Metadata (analyst utilization, coverage, trends)
           3. Report Extract + Metadata → JavaScript calculations → Chart data
           4. Chart data → Chart.js visualizations → Interactive charts
           
           INTEGRATION POINTS:
           - [TODO] Date range picker: User selects period, triggers data fetch
           - [TODO] PDF generation: Export report as PDF for archival/handouts
           - [TODO] CORR API integration: Replace example data with live API calls
           - [TODO] Excel parsing: Parse Report Extract Excel file programmatically
           
           CHART LIBRARIES:
           - Chart.js v4.4.0: Line charts, pie charts, bar charts
           - chartjs-chart-sankey v0.14.0: Sankey flow diagrams
           
           DATA PROCESSING:
           - All calculations performed client-side in JavaScript
           - Example data currently hardcoded (see EXAMPLE DATA CONFIGURATION below)
           - Production implementation must replace with dynamic data loading
           
           EXCEL COLUMN MAPPING:
           See comprehensive mapping documentation in comments throughout HTML.
           Key columns referenced:
           - col 1: Incident Id
           - col 7: Product
           - col 9: Initial Escalation Method
           - col 12: CS SOC Verdict
           - col 13: Current Priority
           - col 20: Escalated Datetime (US/Central)
           - col 26: Touched By
           - col 27: Closed By
           - col 29: Customer Last Comment
           - col 36: Response Action Status
           - col 37: CS SOC Time to Respond (TTR) (hh:mm)
           - col 42: MITRE ATT&CK tactic name
           - col 44: MITRE ATT&CK technique name
           - col 45: Vendor Severity
           
           ============================================================================ */
        
        /* ============================================================================
           EXCEL COLUMN MAPPING REFERENCE
           ============================================================================
           COMPREHENSIVE MAPPING OF REPORT EXTRACT COLUMNS TO REPORT SECTIONS
           
           The Report Extract Excel file contains 45 columns of incident data.
           This section documents which columns are used where in the report.
           
           COLUMN REFERENCE:
           - col 1: Incident Id
             USAGE: Primary key for counting incidents, aggregations
             SECTIONS: All sections requiring incident counts
           
           - col 7: Product
             USAGE: Detection source identification, product-level FP rate calculation
             SECTIONS: Detection Sources & Quality section
             CALCULATION: Group by product, count incidents, calculate FP rate per product
           
           - col 9: Initial Escalation Method
             USAGE: Distinguish automated (Playbook) vs manual (CS SOC) escalations
             SECTIONS: Escalation Methods, Response Efficiency
             VALUES: "Playbook" (automated), "CS SOC" (analyst-driven)
             BUSINESS RULE: Target < 12% for manual escalations
           
           - col 12: CS SOC Verdict
             USAGE: Classification of incident outcome (TP, FP, BTP, etc.)
             SECTIONS: Executive Summary, Detection Quality, Detection Sources
             CALCULATIONS: False Positive Rate = (FP count / Total) × 100
             VALUES: True Positive (TP), False Positive (FP), Benign True Positive (BTP)
           
           - col 13: Current Priority
             USAGE: Critical Start's severity determination after analyst review
             SECTIONS: Severity Alignment Flow, Target Metrics (priority-based MTTR)
             COMPARISON: Compared against col 45 (Vendor Severity) for Sankey diagram
             VALUES: Critical, High, Medium, Low, Informational
           
           - col 20: Escalated Datetime (US/Central)
             USAGE: Timestamp for time-based analysis (business hours, after-hours, weekends)
             SECTIONS: Hero Impact, Executive Summary, CS SOC Alert Resolution, After-Hours Notifications
             CALCULATIONS: 
               - Business Hours: 8am-6pm Mon-Fri
               - After Hours: 6pm-8am weekdays
               - Weekend: Saturday-Sunday
           
           - col 26: Touched By
             USAGE: Track collaboration touches per incident
             SECTIONS: Collaboration Quality
             CALCULATION: Average touches per incident = Total touches / Total incidents
           
           - col 27: Closed By
             USAGE: Identify client-led vs CS SOC-led closures
             SECTIONS: Collaboration Quality
             CALCULATION: Client-Led Closures % = (Client closures / Total) × 100
           
           - col 29: Customer Last Comment
             USAGE: Indicate active client participation
             SECTIONS: Collaboration Quality
             CALCULATION: Active Participation % = (Incidents with comments / Total) × 100
           
           - col 36: Response Action Status
             USAGE: Containment status of incidents
             SECTIONS: Response Efficiency
             CALCULATION: Containment Rate = (Contained count / Total) × 100
             VALUES: "Contained", "Not Contained", etc.
             BUSINESS RULE: Target 95% containment rate
           
           - col 37: CS SOC Time to Respond (TTR) (hh:mm)
             USAGE: Response time metric for SLA calculations
             SECTIONS: Hero Impact, Executive Summary, Target Metrics, Performance Trend
             CALCULATIONS:
               - P90 Response Time: 90th percentile of all response times
               - MTTR: Mean Time to Respond = Average of all response times
               - Priority-based MTTR: Filter by col 13, then calculate mean
             BUSINESS RULE: P90 target < 90 minutes
             FORMAT: "hh:mm" (e.g., "01:23" = 83 minutes)
           
           - col 42: MITRE ATT&CK tactic name
             USAGE: Adversary tactic classification
             SECTIONS: Threat Landscape by Tactic & Severity
             CALCULATION: Group by tactic, count incidents, segment by severity (col 45)
           
           - col 44: MITRE ATT&CK technique name
             USAGE: Specific technique identification (referenced but not primary)
             SECTIONS: Threat Landscape (data source citation)
           
           - col 45: Vendor Severity
             USAGE: Original vendor-reported severity before CS analyst review
             SECTIONS: Severity Alignment Flow, Threat Landscape, After-Hours Notifications
             COMPARISON: Compared against col 13 (Current Priority) for Sankey diagram
             VALUES: Critical, High, Medium, Low, Informational
           
           ADDITIONAL DATA SOURCES (Not in Excel):
           - CORR Platform Metadata:
             * Analyst Utilization & Coverage: Hours of expert analysis
             * Non-escalated alert volume: Alerts resolved without escalation
             * Rolling 90-day averages: MTTR, MTTD, FP % trends
             * Detection timestamps: For MTTD calculation
           
           - Trusted Behavior Registry (TBR):
             * Client-validated outcomes: Client confirmation of escalations
           
           - Industry Benchmarks:
             * SANS Institute 2024 SOC Survey: Industry average comparisons
             * Breach cost models: Threat prevention value calculations
           ============================================================================ */
        
        /* ============================================================================
           EXAMPLE DATA CONFIGURATION
           ============================================================================
           [EXAMPLE DATA] All values below are wireframe/example data for demonstration.
           In production, these must be replaced with dynamic data from:
           - CORR platform API
           - Report Extract Excel file parsing
           - Calculated metrics from incident data
           
           CONFIGURATION STRUCTURE:
           This object should be populated from production data sources.
           All calculations should reference this configuration for consistency.
           ============================================================================ */
        const EXAMPLE_DATA_CONFIG = {
            // Report metadata
            clientName: 'Lennar Corporation', // [DYNAMIC] From CORR platform
            tier: 'Signature Tier', // [DYNAMIC] From CORR platform
            periodStart: 'August 1, 2025', // [DYNAMIC] From date range picker
            periodEnd: 'August 31, 2025', // [DYNAMIC] From date range picker
            periodDays: 31, // [DYNAMIC] Calculate from dates
            
            // Hero Impact metrics
            hoursOfExpertAnalysis: 452, // [DYNAMIC] From CORR analyst utilization
            alertsResolved: 1843, // [DYNAMIC] From CORR non-escalated alert volume
            coverageHours: 744, // [DYNAMIC] Calculate: periodDays × 24
            targetCompliance: 88, // [DYNAMIC] Calculate from response time targets vs actuals
            
            // Executive Summary
            totalIncidentsEscalated: 267, // [DYNAMIC] Count from Report Extract col 1
            dailyAverageIncidents: 8.9, // [DYNAMIC] Calculate: totalIncidentsEscalated / periodDays
            truePositiveThreats: 11, // [DYNAMIC] Count "TP" in Report Extract col 12
            falsePositiveRate: 9.0, // [DYNAMIC] Calculate: (FP count / Total) × 100 from col 12
            
            // Performance metrics
            p90ResponseTime: 87, // [DYNAMIC] Calculate 90th percentile from col 37
            criticalHighMTTR: 67, // [DYNAMIC] Filter col 13 for Critical/High, calculate mean from col 37
            mediumLowMTTR: 52, // [DYNAMIC] Filter col 13 for Medium/Low, calculate mean from col 37
            mttd: 4, // [DYNAMIC] Calculate from CORR detection timestamps
            
            // Trend data (3 periods)
            trendPeriods: ['Period -2', 'Period -1', 'Current'], // [DYNAMIC] Generate from date ranges
            trendMTTR: [168, 150, 126], // [DYNAMIC] Calculate mean from col 37 per period
            trendMTTD: [54, 48, 42], // [DYNAMIC] Calculate from CORR metadata per period
            trendFP: [12.1, 10.8, 9.2], // [DYNAMIC] Calculate from col 12 per period
            
            // Value delivered calculations
            analystHourlyRate: 85, // [CONFIGURABLE] Loaded cost per hour
            fullTimeAnalystCost: 110000, // [CONFIGURABLE] Annual analyst cost
            breachCostAverage: 4450000, // [CONFIGURABLE] Industry average breach cost
            threatPreventionProbability: 0.15, // [CONFIGURABLE] Conservative probability factor (15%)
            
            // Detection sources
            products: [
                { name: 'Palo Alto Cortex XDR (Extended Detection and Response)', incidents: 189, fpRate: 11.2 },
                { name: 'Microsoft Sentinel', incidents: 52, fpRate: 5.8 },
                { name: 'CrowdStrike Falcon', incidents: 26, fpRate: 7.7 }
            ], // [DYNAMIC] Aggregate from Report Extract col 7, calculate FP rates from col 12
            
            // Escalation methods
            playbookEscalations: 229, // [DYNAMIC] Count "Playbook" in col 9
            analystEscalations: 38, // [DYNAMIC] Count "CS SOC" in col 9
            
            // Operational load (time buckets)
            businessHoursPercent: 51, // [DYNAMIC] Calculate from col 20: 8am-6pm Mon-Fri
            afterHoursPercent: 41, // [DYNAMIC] Calculate from col 20: 6pm-8am weekdays
            weekendPercent: 8, // [DYNAMIC] Calculate from col 20: Saturday-Sunday
            
            // Response efficiency
            containmentRate: 98, // [DYNAMIC] Count "Contained" in col 36, calculate percentage
            containedCount: 262, // [DYNAMIC] Count from col 36
            
            // Collaboration quality
            avgTouchesPerIncident: 2.3, // [DYNAMIC] Calculate from col 26
            activeClientParticipation: 72, // [DYNAMIC] Calculate from col 29
            clientLedClosures: 21, // [DYNAMIC] Calculate from col 27
            
            // Severity flow data (for Sankey diagram)
            severityFlows: [
                { from: 'Vendor Critical', to: 'CS Critical', flow: 7 },
                { from: 'Vendor Critical', to: 'CS High', flow: 1 },
                { from: 'Vendor High', to: 'CS Critical', flow: 2 },
                { from: 'Vendor High', to: 'CS High', flow: 7 },
                { from: 'Vendor High', to: 'CS Medium', flow: 4 },
                { from: 'Vendor High', to: 'CS Low', flow: 2 },
                { from: 'Vendor Medium', to: 'CS High', flow: 9 },
                { from: 'Vendor Medium', to: 'CS Medium', flow: 72 },
                { from: 'Vendor Medium', to: 'CS Low', flow: 32 },
                { from: 'Vendor Medium', to: 'CS Informational', flow: 8 },
                { from: 'Vendor Low', to: 'CS Medium', flow: 18 },
                { from: 'Vendor Low', to: 'CS Low', flow: 67 },
                { from: 'Vendor Low', to: 'CS Informational', flow: 18 },
                { from: 'Vendor Informational', to: 'CS Low', flow: 5 },
                { from: 'Vendor Informational', to: 'CS Informational', flow: 15 }
            ], // [DYNAMIC] Calculate by comparing col 45 vs col 13
            
            // MITRE ATT&CK threat landscape
            mitreTactics: [
                { tactic: 'Persistence', high: 12, medium: 38, low: 22, info: 5 },
                { tactic: 'Defense Evasion', high: 8, medium: 31, low: 18, info: 3 },
                { tactic: 'Execution', high: 5, medium: 22, low: 15, info: 2 },
                { tactic: 'Discovery', high: 3, medium: 18, low: 24, info: 8 },
                { tactic: 'Initial Access', high: 2, medium: 12, low: 16, info: 3 }
            ] // [DYNAMIC] Aggregate from col 42, segment by col 45
        };
        
        /* ============================================================================
           BUSINESS RULES & THRESHOLDS
           ============================================================================
           These thresholds trigger automated improvement recommendations when exceeded.
           ============================================================================ */
        const BUSINESS_RULES = {
            falsePositiveRateThreshold: 10.0, // Per product - triggers detection tuning recommendation
            manualEscalationThreshold: 12, // Percentage - triggers automation opportunity
            containmentTarget: 95, // Percentage - triggers containment improvement
            p90ResponseTimeTarget: 90, // Minutes - primary SLA metric
            mttrTarget: 90, // Minutes - for all priority levels
            mttdTarget: 15 // Minutes - detection speed target
        };
        
        /* ============================================================================
           OPERATIONAL LOAD PIE CHART
           ============================================================================
           BUSINESS CONTEXT: Shows distribution of CS SOC alert resolution across
           business hours, after-hours, and weekends. Demonstrates 24/7 coverage value.
           
           DATA PROCESSING:
           - [DYNAMIC] Calculate time buckets from Escalated Datetime (col 20)
           - Business Hours: 8am-6pm Mon-Fri
           - After Hours: 6pm-8am weekdays
           - Weekend: Saturday-Sunday
           
           DATA SOURCE: Report Extract - Escalated Datetime (US/Central) (col 20)
           [EXAMPLE] Current percentages are wireframe data
           ============================================================================ */
        const opLoadCtx = document.getElementById('operationalLoadChart').getContext('2d');
        new Chart(opLoadCtx, {
            type: 'pie',
            data: {
                labels: ['Business Hours', 'After Hours', 'Weekend'],
                datasets: [{
                    // [EXAMPLE DATA] Percentages - Calculate from col 20 datetime analysis
                    // [TODO] Replace with: [EXAMPLE_DATA_CONFIG.businessHoursPercent, EXAMPLE_DATA_CONFIG.afterHoursPercent, EXAMPLE_DATA_CONFIG.weekendPercent]
                    data: [51, 41, 8],
                    backgroundColor: ['#009CDE', '#702F8A', '#EF3340'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            font: {
                                family: 'Roboto',
                                size: 12
                            },
                            padding: 15
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.parsed + '%';
                            }
                        }
                    }
                }
            }
        });

        /* ============================================================================
           PERFORMANCE TREND LINE CHART
           ============================================================================
           BUSINESS CONTEXT: Shows improvement trajectory across three periods for
           MTTR, MTTD, and False Positive rate. Demonstrates continuous improvement
           and tuning effectiveness.
           
           DATA PROCESSING:
           - [DYNAMIC] Period labels: Generate from date range (e.g., "Aug 2025", "Sep 2025")
           - [DYNAMIC] MTTR: Calculate mean from CS SOC Time to Respond (col 37) per period
           - [DYNAMIC] MTTD: Calculate from detection timestamps (CORR metadata)
           - [DYNAMIC] FP %: Calculate from CS SOC Verdict (col 12) per period
           
           CHART CONFIGURATION:
           - Left Y-axis: Minutes (MTTR, MTTD)
           - Right Y-axis: Percentage (False Positive %)
           - Dashed line for FP % to distinguish from time-based metrics
           
           DATA SOURCES:
           - MTTR: Report Extract - CS SOC Time to Respond (TTR) (col 37)
           - MTTD: CORR platform metadata
           - FP %: Report Extract - CS SOC Verdict (col 12)
           
           [EXAMPLE] Current data points are wireframe examples
           ============================================================================ */
        const trendCtx = document.getElementById('trendChart').getContext('2d');
        new Chart(trendCtx, {
            type: 'line',
            data: {
                // [DYNAMIC] Period labels - Generate from date ranges
                // [TODO] Replace with: EXAMPLE_DATA_CONFIG.trendPeriods
                labels: ['Period -2', 'Period -1', 'Current'],
                datasets: [
                    {
                        label: 'MTTR (min)',
                        // [EXAMPLE DATA] MTTR values - Calculate from col 37 per period
                        // [TODO] Replace with: EXAMPLE_DATA_CONFIG.trendMTTR
                        data: [168, 150, 126],
                        borderColor: '#009CDE',
                        backgroundColor: 'rgba(0, 156, 222, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    },
                    {
                        label: 'MTTD (min)',
                        // [EXAMPLE DATA] MTTD values - Calculate from CORR metadata per period
                        // [TODO] Replace with: EXAMPLE_DATA_CONFIG.trendMTTD
                        data: [54, 48, 42],
                        borderColor: '#004C97',
                        backgroundColor: 'rgba(0, 76, 151, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    },
                    {
                        label: 'FP %',
                        // [EXAMPLE DATA] False Positive % - Calculate from col 12 per period
                        // [TODO] Replace with: EXAMPLE_DATA_CONFIG.trendFP
                        data: [12.1, 10.8, 9.2],
                        borderColor: '#EF3340',
                        backgroundColor: 'rgba(239, 51, 64, 0.1)',
                        borderWidth: 3,
                        borderDash: [8, 4],
                        tension: 0.4,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        yAxisID: 'y1'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        callbacks: {
                            label: function(context) {
                                const datasetLabel = context.dataset.label || '';
                                const value = context.parsed.y;
                                if (datasetLabel.includes('FP')) {
                                    return datasetLabel + ': ' + value.toFixed(1) + '%';
                                }
                                return datasetLabel + ': ' + Math.round(value) + ' min';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Minutes'
                        },
                        ticks: {
                            font: {
                                family: 'Roboto',
                                size: 11
                            }
                        }
                    },
                    y1: {
                        beginAtZero: true,
                        position: 'right',
                        title: {
                            display: true,
                            text: 'False Positive %'
                        },
                        grid: {
                            drawOnChartArea: false
                        },
                        ticks: {
                            font: {
                                family: 'Roboto',
                                size: 11
                            },
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                family: 'Roboto',
                                size: 11
                            }
                        }
                    }
                }
            }
        });

          /* ============================================================================
             SEVERITY ALIGNMENT SANKEY CHART DATA PROCESSING
             ============================================================================
             BUSINESS CONTEXT: Calculates flow data showing how vendor severity
             ratings are adjusted by CS analysts. Demonstrates analyst value-add
             through severity adjudication.
             
             DATA PROCESSING:
             - [DYNAMIC] Compare Vendor Severity (col 45) vs Current Priority (col 13)
             - Count occurrences of each severity transition
             - Aggregate into flow objects: { from: 'Vendor X', to: 'CS Y', flow: count }
             
             CALCULATION LOGIC:
             1. Group incidents by vendor severity (col 45)
             2. For each vendor severity, count CS severity assignments (col 13)
             3. Create flow objects for each transition
             4. Calculate aggregate statistics (upgraded, downgraded, aligned)
             
             DATA SOURCES:
             - Vendor Severity: Report Extract (col 45)
             - Critical Start Determination: Report Extract - Current Priority (col 13)
             
             [EXAMPLE] Current flow data is wireframe example
             ============================================================================ */
          // [EXAMPLE DATA] Severity flow data - Calculate by comparing col 45 vs col 13
          // [TODO] Replace with: EXAMPLE_DATA_CONFIG.severityFlows
          // [DYNAMIC] This should be calculated programmatically from Report Extract data
          const severityFlows = [
              { from: 'Vendor Critical', to: 'CS Critical', flow: 7 },
              { from: 'Vendor Critical', to: 'CS High', flow: 1 },
              { from: 'Vendor High', to: 'CS Critical', flow: 2 },
              { from: 'Vendor High', to: 'CS High', flow: 7 },
              { from: 'Vendor High', to: 'CS Medium', flow: 4 },
              { from: 'Vendor High', to: 'CS Low', flow: 2 },
              { from: 'Vendor Medium', to: 'CS High', flow: 9 },
              { from: 'Vendor Medium', to: 'CS Medium', flow: 72 },
              { from: 'Vendor Medium', to: 'CS Low', flow: 32 },
              { from: 'Vendor Medium', to: 'CS Informational', flow: 8 },
              { from: 'Vendor Low', to: 'CS Medium', flow: 18 },
              { from: 'Vendor Low', to: 'CS Low', flow: 67 },
              { from: 'Vendor Low', to: 'CS Informational', flow: 18 },
              { from: 'Vendor Informational', to: 'CS Low', flow: 5 },
              { from: 'Vendor Informational', to: 'CS Informational', flow: 15 }
          ];

          /* ============================================================================
             SEVERITY COLOR MAPPING
             ============================================================================
             BUSINESS CONTEXT: Color coding for severity levels follows Critical Start
             brand guidelines and provides visual hierarchy in the Sankey diagram.
             
             COLOR SEMANTICS:
             - Critical (Red): Highest priority, immediate action required
             - High (Orange): High priority, urgent attention needed
             - Medium (Yellow): Moderate priority, standard handling
             - Low (Blue): Lower priority, routine handling
             - Informational (Gray): Lowest priority, informational only
             ============================================================================ */
          const severityBaseColors = {
              Critical: '#EF3340',
              High: '#FF6A14',
              Medium: '#FDBA4D',
              Low: '#009CDE',
              Informational: '#9CA3AF'
          };

            const nodeColorMap = {};
            Object.keys(severityBaseColors).forEach((severity) => {
                nodeColorMap[`Vendor ${severity}`] = severityBaseColors[severity];
                nodeColorMap[`CS ${severity}`] = severityBaseColors[severity];
            });

            const sankeyPriorityOrder = ['Critical', 'High', 'Medium', 'Low', 'Informational'];
            const nodePriorityMap = sankeyPriorityOrder.reduce((acc, severity, index) => {
                acc[`Vendor ${severity}`] = index;
                acc[`CS ${severity}`] = index;
                return acc;
            }, {});

          const severityOrder = ['Informational', 'Low', 'Medium', 'High', 'Critical'];
          const totalSeverityFlows = severityFlows.reduce((sum, link) => sum + link.flow, 0);

          const getSeverityDetails = (label) => {
              const parts = label.split(' ');
              const severityLabel = parts[parts.length - 1];
              return {
                  name: severityLabel,
                  index: severityOrder.indexOf(severityLabel)
              };
          };

          /* ============================================================================
             SEVERITY SHIFT AGGREGATION CALCULATION
             ============================================================================
             BUSINESS CONTEXT: Calculates aggregate statistics from severity flow data
             to populate summary metrics and insights in the UI.
             
             CALCULATION LOGIC:
             - Upgraded: CS severity > Vendor severity (analyst raised priority)
             - Downgraded: CS severity < Vendor severity (analyst reduced noise)
             - Aligned: CS severity = Vendor severity (no change)
             - Top flows: Identifies largest severity transitions for insights
             
             USAGE: Results populate summary stats and dynamic insight text
             ============================================================================ */
          const aggregateShifts = severityFlows.reduce((acc, link) => {
              const source = getSeverityDetails(link.from);
              const target = getSeverityDetails(link.to);

              if (target.index > source.index) {
                  acc.upgraded += link.flow;
                  if (link.flow > acc.topUpgrade.flow) {
                      acc.topUpgrade = { ...link, severity: `${source.name} → ${target.name}` };
                  }
              } else if (target.index < source.index) {
                  acc.downgraded += link.flow;
                  if (link.flow > acc.topDowngrade.flow) {
                      acc.topDowngrade = { ...link, severity: `${source.name} → ${target.name}` };
                  }
              } else {
                  acc.aligned += link.flow;
              }

              if (link.flow > acc.topFlow.flow) {
                  acc.topFlow = { ...link, severity: `${source.name} → ${target.name}` };
              }

              return acc;
          }, {
              upgraded: 0,
              downgraded: 0,
              aligned: 0,
              topUpgrade: { flow: 0, severity: '' },
              topDowngrade: { flow: 0, severity: '' },
              topFlow: { flow: 0, severity: '' }
          });

          const formatNumber = (value) => value.toLocaleString('en-US');
          const formatPercentValue = (value) => {
              if (!totalSeverityFlows) {
                  return '0%';
              }
              const pct = ((value / totalSeverityFlows) * 100).toFixed(1);
              return pct.endsWith('.0') ? pct.slice(0, -2) + '%' : pct + '%';
          };

          const totalChipEl = document.querySelector('[data-total-escalations]');
          if (totalChipEl) {
              totalChipEl.textContent = `${formatNumber(totalSeverityFlows)} escalations`;
          }

          const flowUpgradedEl = document.querySelector('[data-flow-upgraded]');
          const flowDowngradedEl = document.querySelector('[data-flow-downgraded]');
          const flowAlignedEl = document.querySelector('[data-flow-aligned]');

          if (flowUpgradedEl) {
              flowUpgradedEl.textContent = formatNumber(aggregateShifts.upgraded);
          }
          if (flowDowngradedEl) {
              flowDowngradedEl.textContent = formatNumber(aggregateShifts.downgraded);
          }
          if (flowAlignedEl) {
              flowAlignedEl.textContent = formatNumber(aggregateShifts.aligned);
          }

          const upgradeCopyEl = document.querySelector('[data-flow-upgrade-copy]');
          if (upgradeCopyEl) {
              if (aggregateShifts.upgraded) {
                  upgradeCopyEl.textContent = `${formatNumber(aggregateShifts.upgraded)} alerts (${formatPercentValue(aggregateShifts.upgraded)}) were upgraded — primarily ${aggregateShifts.topUpgrade.severity} (${aggregateShifts.topUpgrade.flow}) when vendor context understated the risk.`;
              } else {
                  upgradeCopyEl.textContent = 'No vendor alerts required an upward severity adjustment this period.';
              }
          }

          const downgradeCopyEl = document.querySelector('[data-flow-downgrade-copy]');
          if (downgradeCopyEl) {
              if (aggregateShifts.downgraded) {
                  const downgradeHighlight = aggregateShifts.topDowngrade.flow
                      ? `${aggregateShifts.topDowngrade.severity} (${aggregateShifts.topDowngrade.flow})`
                      : 'de-escalated flows';
                  downgradeCopyEl.textContent = `${formatNumber(aggregateShifts.downgraded)} alerts (${formatPercentValue(aggregateShifts.downgraded)}) were de-escalated — ${downgradeHighlight} kept noise away from your on-call team.`;
              } else {
                  downgradeCopyEl.textContent = 'All vendor alerts held their original severity, no de-escalations required.';
              }
          }

          const dominantCopyEl = document.querySelector('[data-flow-dominant-copy]');
          if (dominantCopyEl) {
              if (aggregateShifts.topFlow.flow) {
                  dominantCopyEl.textContent = `Largest stream: ${aggregateShifts.topFlow.severity} (${aggregateShifts.topFlow.flow} alerts). Targeting automation/tuning here will yield the most impact.`;
              } else {
                  dominantCopyEl.textContent = 'Severity paths evenly distributed this period.';
              }
          }

          const sankeyLegendEl = document.getElementById('sankeyLegend');
          if (sankeyLegendEl) {
              sankeyLegendEl.innerHTML = '';
              severityOrder.slice().reverse().forEach((severity) => {
                  const legendItem = document.createElement('div');
                  legendItem.className = 'legend-item';
                  legendItem.innerHTML = `
                      <span class="legend-dot" style="background-color: ${severityBaseColors[severity]};"></span>
                      <span>${severity}</span>
                  `;
                  sankeyLegendEl.appendChild(legendItem);
              });
          }

          // Severity Sankey Chart - with error handling
          try {
              const severitySankeyCanvas = document.getElementById('severitySankeyChart');
              if (severitySankeyCanvas) {
                  const severitySankeyCtx = severitySankeyCanvas.getContext('2d');
                  new Chart(severitySankeyCtx, {
                      type: 'sankey',
                      data: {
                          datasets: [{
                              label: 'Severity alignment',
                              data: severityFlows,
                              colorFrom: (ctx) => {
                                  const link = ctx.dataset.data[ctx.dataIndex];
                                  return nodeColorMap[link.from] || '#009CDE';
                              },
                              colorTo: (ctx) => {
                                  const link = ctx.dataset.data[ctx.dataIndex];
                                  return nodeColorMap[link.to] || '#004C97';
                              },
                                priority: nodePriorityMap,
                              colorMode: 'gradient',
                              nodeWidth: 18,
                              nodePadding: 18,
                              borderColor: 'rgba(255, 255, 255, 0.9)',
                              borderWidth: 1
                          }]
                      },
                      options: {
                          responsive: true,
                          maintainAspectRatio: false,
                          plugins: {
                              legend: {
                                  display: false
                              },
                              tooltip: {
                                  callbacks: {
                                      title: () => '',
                                      label: (context) => {
                                          const link = context.raw || context.dataset.data[context.dataIndex];
                                          return `${link.from} → ${link.to}: ${formatNumber(link.flow)} alerts (${formatPercentValue(link.flow)})`;
                                      }
                                  }
                              }
                            }
                      }
                  });
              }
          } catch (error) {
              console.error('Error initializing Severity Sankey chart:', error);
          }

        /* ============================================================================
           MITRE ATT&CK STACKED BAR CHART
           ============================================================================
           BUSINESS CONTEXT: Visualizes threat landscape by adversary tactic and
           severity distribution. Helps prioritize detection tuning and proactive
           hunting efforts.
           
           DATA PROCESSING:
           - [DYNAMIC] Group incidents by MITRE ATT&CK tactic (col 42)
           - [DYNAMIC] Count incidents per tactic, segmented by Vendor Severity (col 45)
           - [DYNAMIC] Sort tactics by total incident count (descending)
           - [DYNAMIC] Limit to top 5-10 tactics for readability
           
           CHART CONFIGURATION:
           - Stacked bar chart: Tactics on X-axis, severity counts stacked on Y-axis
           - Color coding matches severity color system
           - Severity order: High (red), Medium (orange), Low (blue), Info (gray)
           
           DATA SOURCES:
           - MITRE ATT&CK tactic name: Report Extract (col 42)
           - Vendor Severity: Report Extract (col 45)
           
           [EXAMPLE] Current chart data is wireframe example
           ============================================================================ */
        try {
            const mitreCanvas = document.getElementById('mitreChart');
            if (mitreCanvas) {
                const mitreCtx = mitreCanvas.getContext('2d');
                new Chart(mitreCtx, {
                    type: 'bar',
                    data: {
                        // [DYNAMIC] Tactic labels - Aggregate from col 42, sort by total count
                        // [TODO] Replace with: EXAMPLE_DATA_CONFIG.mitreTactics.map(t => t.tactic)
                        labels: ['Persistence', 'Defense Evasion', 'Execution', 'Discovery', 'Initial Access'],
                        datasets: [
                            {
                                label: 'High',
                                // [EXAMPLE DATA] High severity counts per tactic - Calculate from col 42 + col 45
                                // [TODO] Replace with: EXAMPLE_DATA_CONFIG.mitreTactics.map(t => t.high)
                                data: [12, 8, 5, 3, 2],
                                backgroundColor: '#EF3340',
                                borderRadius: 0
                            },
                            {
                                label: 'Medium',
                                // [EXAMPLE DATA] Medium severity counts per tactic
                                // [TODO] Replace with: EXAMPLE_DATA_CONFIG.mitreTactics.map(t => t.medium)
                                data: [38, 31, 22, 18, 12],
                                backgroundColor: '#FF6A14',
                                borderRadius: 0
                            },
                            {
                                label: 'Low',
                                // [EXAMPLE DATA] Low severity counts per tactic
                                // [TODO] Replace with: EXAMPLE_DATA_CONFIG.mitreTactics.map(t => t.low)
                                data: [22, 18, 15, 24, 16],
                                backgroundColor: '#009CDE',
                                borderRadius: 0
                            },
                            {
                                label: 'Info',
                                // [EXAMPLE DATA] Informational severity counts per tactic
                                // [TODO] Replace with: EXAMPLE_DATA_CONFIG.mitreTactics.map(t => t.info)
                                data: [5, 3, 2, 8, 3],
                                backgroundColor: '#9CA3AF',
                                borderRadius: 0
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    font: {
                                        family: 'Roboto',
                                        size: 11
                                    },
                                    padding: 10
                                }
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                callbacks: {
                                    footer: function(tooltipItems) {
                                        let total = 0;
                                        tooltipItems.forEach(function(tooltipItem) {
                                            total += tooltipItem.parsed.y;
                                        });
                                        return 'Total: ' + total;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                stacked: true,
                                ticks: {
                                    font: {
                                        family: 'Roboto',
                                        size: 10
                                    },
                                    maxRotation: 45,
                                    minRotation: 15
                                }
                            },
                            y: {
                                stacked: true,
                                beginAtZero: true,
                                ticks: {
                                    font: {
                                        family: 'Roboto',
                                        size: 11
                                    }
                                }
                            }
                        }
                    }
                });
            }
        } catch (error) {
            console.error('Error initializing MITRE ATT&CK chart:', error);
        }
    </script>
</body>
</html>
