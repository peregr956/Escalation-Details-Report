<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Escalation to Client Details Report - Critical Start</title>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-sankey@0.14.0/dist/chartjs-chart-sankey.min.js" integrity="sha512-p9MnIc0Xzj4QcoFGM2vuBWpT+8mDtCgpLju/3i1F7w3LVRTIWEpXgEmVH1SUMulnO5A55oHdku3IjS7BwYFm0w==" crossorigin="anonymous"></script>
    <style>
        :root {
            --cs-blue: #009CDE;
            --cs-navy: #004C97;
            --cs-slate: #343741;
            --cs-purple: #702F8A;
            --cs-red: #EF3340;
            --cs-orange: #FF6A14;
            --cs-blue-05: rgba(0, 156, 222, 0.05);
            --cs-blue-10: rgba(0, 156, 222, 0.1);
            --cs-blue-15: rgba(0, 156, 222, 0.15);
            --cs-navy-12: rgba(0, 76, 151, 0.12);
            --cs-navy-25: rgba(0, 76, 151, 0.25);
            --cs-slate-80: rgba(52, 55, 65, 0.8);
            --cs-slate-75: rgba(52, 55, 65, 0.75);
            --cs-slate-60: rgba(52, 55, 65, 0.6);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', system-ui, sans-serif;
            background-color: var(--cs-blue-05);
            color: var(--cs-slate);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px;
        }

        .grid {
            display: grid;
            gap: 24px;
        }

        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .card-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--cs-navy-12);
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--cs-navy);
        }

        .card-content {
            padding: 24px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            background: white;
            padding: 24px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 24px;
        }

        .badge {
            background-color: var(--cs-blue);
            color: white;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 18px;
            font-weight: 500;
        }

        .icon-outline {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid var(--cs-blue);
            color: var(--cs-blue);
            flex-shrink: 0;
            font-size: 16px;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
        }

        .grid-4 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .grid-5 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
        }

        .stat-card {
            text-align: center;
            padding: 16px;
            border-radius: 8px;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 14px;
            color: rgba(52, 55, 65, 0.75);
            margin-bottom: 8px;
        }

        .stat-detail {
            font-size: 12px;
            color: rgba(52, 55, 65, 0.6);
        }

        .improvement-delta {
            font-weight: 600;
            font-size: 16px;
            color: #009CDE;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        .table thead tr {
            border-bottom: 2px solid #009CDE;
        }

        .table th {
            padding: 12px 8px;
            font-weight: 600;
        }

        .table td {
            padding: 12px 8px;
            border-top: 1px solid rgba(0, 76, 151, 0.12);
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-better {
            background-color: rgba(0, 156, 222, 0.2);
            color: #004C97;
        }

        .status-worse {
            background-color: rgba(255, 106, 20, 0.2);
            color: #FF6A14;
        }

        .chart-container {
            position: relative;
            height: 250px;
            margin-top: 16px;
        }

        .chart-legend {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-top: 16px;
            font-size: 14px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 32px;
            height: 4px;
        }

        .info-box {
            padding: 12px;
            border-radius: 6px;
            font-size: 12px;
            margin-top: 12px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .summary-item {
            padding-left: 12px;
            border-left: 4px solid #009CDE;
        }

        .summary-title {
            font-weight: 600;
            color: #009CDE;
            font-size: 14px;
        }

        .summary-value {
            color: rgba(52, 55, 65, 0.75);
            font-size: 14px;
        }

        .product-item, .method-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background-color: rgba(0, 156, 222, 0.05);
            border-radius: 6px;
            margin-bottom: 12px;
        }

        .percentage-circle {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 700;
            color: white;
        }

        .improvement-item {
            border-radius: 6px;
            margin-bottom: 16px;
            padding: 16px;
            border: 1px solid rgba(0, 76, 151, 0.12);
        }

        .priority-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 4px;
            color: white;
            font-size: 12px;
            font-weight: 700;
        }

        .priority-high {
            background-color: var(--cs-red);
        }

        .priority-medium {
            background-color: var(--cs-orange);
        }

        .priority-low {
            background-color: var(--cs-blue);
        }

        .value-item {
            display: flex;
            align-items: start;
            gap: 12px;
            padding: 8px;
            background: white;
            border-radius: 6px;
        }

        .footer {
            background: white;
            padding: 16px;
            border-radius: 8px;
            font-size: 12px;
            color: rgba(52, 55, 65, 0.75);
            margin-top: 24px;
        }

        .cost-avoidance-card {
            background: linear-gradient(to bottom right, rgba(0, 156, 222, 0.15), rgba(0, 76, 151, 0.1));
            border: 2px solid #009CDE;
        }

        .cost-component {
            background: white;
            padding: 16px;
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .highlight-box {
            background-color: rgba(0, 156, 222, 0.1);
            border: 1px solid #009CDE;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 16px;
        }

          .card-subtitle {
              margin-top: 4px;
              font-size: 14px;
              color: rgba(52, 55, 65, 0.75);
          }

          .detection-quality-card .card-content {
              padding: 32px;
          }

          .detection-quality-layout {
              display: grid;
              grid-template-columns: minmax(0, 1fr);
              gap: 28px;
              align-items: start;
          }

          .detection-metric-grid {
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
              gap: 16px;
          }

          .detection-metric {
              border: 1px solid rgba(0, 76, 151, 0.12);
              border-radius: 12px;
              padding: 16px 18px;
              background-color: rgba(0, 156, 222, 0.05);
          }

          .detection-metric-critical {
              background-color: rgba(239, 51, 64, 0.08);
              border-color: rgba(239, 51, 64, 0.25);
          }

          .detection-metric-warning {
              background-color: rgba(255, 106, 20, 0.08);
              border-color: rgba(255, 106, 20, 0.25);
          }

          .detection-metric-positive {
              background-color: rgba(0, 156, 222, 0.08);
              border-color: rgba(0, 156, 222, 0.25);
          }

          .detection-metric-label {
              font-size: 12px;
              text-transform: uppercase;
              letter-spacing: 0.06em;
              color: rgba(52, 55, 65, 0.75);
              margin-bottom: 6px;
          }

          .detection-metric-value {
              font-size: 28px;
              font-weight: 700;
              color: #343741;
              margin-bottom: 6px;
          }

          .detection-metric-detail {
              font-size: 12px;
              color: rgba(52, 55, 65, 0.75);
          }

          .detection-metric-trend {
              font-size: 12px;
              color: #004C97;
              margin-top: 6px;
              font-weight: 500;
          }

          .detection-insight-list {
              display: grid;
              gap: 16px;
              margin-top: 24px;
          }

          .detection-insight {
              display: grid;
              grid-template-columns: 12px auto;
              gap: 12px;
              align-items: start;
          }

          .detection-insight-dot {
              width: 12px;
              height: 12px;
              border-radius: 50%;
              margin-top: 4px;
          }

          .detection-insight-title {
              font-weight: 600;
              color: #343741;
              font-size: 14px;
              margin-bottom: 4px;
          }

          .detection-insight-text {
              font-size: 13px;
              color: rgba(52, 55, 65, 0.75);
              line-height: 1.6;
          }

          .legend-dot {
              width: 12px;
              height: 12px;
              border-radius: 50%;
              flex-shrink: 0;
          }

          .detection-footnote {
              font-size: 11px;
              color: rgba(52, 55, 65, 0.6);
              margin-top: 24px;
              font-style: italic;
          }

        .severity-card .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 16px;
        }

        .severity-card .card-content {
            padding: 28px;
        }

        .severity-card-body {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 28px;
            align-items: stretch;
        }

        .severity-chip {
            background-color: rgba(0, 156, 222, 0.12);
            color: #004C97;
            font-weight: 600;
            font-size: 14px;
            padding: 6px 14px;
            border-radius: 999px;
            border: 1px solid rgba(0, 76, 151, 0.15);
        }

        .severity-flow-panel {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .severity-flow-panel p {
            font-size: 14px;
            color: rgba(52, 55, 65, 0.8);
            line-height: 1.6;
        }

        .severity-flow-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px;
        }

        .flow-stat {
            border: 1px solid rgba(0, 76, 151, 0.12);
            border-radius: 10px;
            padding: 12px 14px;
            background-color: rgba(0, 156, 222, 0.05);
        }

        .flow-stat[data-accent="critical"] {
            background-color: rgba(239, 51, 64, 0.08);
            border-color: rgba(239, 51, 64, 0.25);
        }

        .flow-stat[data-accent="warning"] {
            background-color: rgba(255, 106, 20, 0.08);
            border-color: rgba(255, 106, 20, 0.25);
        }

        .flow-stat-value {
            font-size: 28px;
            font-weight: 700;
            color: #343741;
            line-height: 1.1;
        }

        .flow-stat-label {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: rgba(52, 55, 65, 0.75);
        }

        .severity-flow-insights {
            display: grid;
            gap: 10px;
            margin: 0;
            padding: 0;
        }

        .severity-flow-insights li {
            list-style: none;
            display: grid;
            grid-template-columns: 10px auto;
            gap: 10px;
            color: rgba(52, 55, 65, 0.85);
            font-size: 13px;
        }

        .severity-flow-insights li::before {
            content: '';
            display: block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-top: 6px;
            background-color: #009CDE;
        }

        .severity-flow-insights li[data-accent="lift"]::before {
            background-color: #EF3340;
        }

        .severity-flow-insights li[data-accent="lower"]::before {
            background-color: #9CA3AF;
        }

        .sankey-chart-wrapper {
            min-height: 320px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .sankey-chart-container {
            flex: 1;
            position: relative;
            min-height: 320px;
        }

        .sankey-chart-container canvas {
            width: 100% !important;
            height: 100% !important;
        }

        .sankey-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            font-size: 13px;
            color: rgba(52, 55, 65, 0.85);
        }

        .sankey-legend .legend-item {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .card-footnote {
            font-size: 11px;
            color: rgba(52, 55, 65, 0.6);
            font-style: italic;
            margin-top: 12px;
        }

        @media (max-width: 1024px) {
            .detection-quality-layout {
                grid-template-columns: 1fr;
            }
        }

        /* Hero Impact Section */
        .hero-section {
            background: linear-gradient(135deg, #009CDE 0%, #004C97 100%);
            border-radius: 12px;
            padding: 48px 32px;
            margin-bottom: 48px;
            box-shadow: 0 4px 12px rgba(0, 76, 151, 0.15);
        }

        .hero-title {
            color: white;
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 8px;
            text-align: center;
        }

        .hero-subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            text-align: center;
            margin-bottom: 40px;
        }

        .hero-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
        }

        .hero-metric {
            text-align: center;
            padding: 32px 24px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .hero-number {
            font-size: 64px;
            font-weight: 700;
            color: white;
            line-height: 1;
            margin-bottom: 12px;
        }

        .hero-label {
            font-size: 18px;
            font-weight: 500;
            color: white;
            margin-bottom: 8px;
        }

        .hero-context {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.5;
        }

        /* Tier spacing */
        .tier-1-spacing {
            margin-bottom: 48px;
        }

        .tier-2-spacing {
            margin-bottom: 32px;
        }

        @media print {
            .container {
                max-width: 100%;
            }
            .card {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
                <div>
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQwIiBoZWlnaHQ9IjUyIiB2aWV3Qm94PSIwIDAgMjQwIDUyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHJvbGU9ImltZyIgYXJpYS1sYWJlbGxlZGJ5PSJjc0xvZ29UaXRsZSBjc0xvZ29EZXNjIj4KICA8dGl0bGUgaWQ9ImNzTG9nb1RpdGxlIj5Dcml0aWNhbCBTdGFydCBQcmltYXJ5IExvZ288L3RpdGxlPgogIDxkZXNjIGlkPSJjc0xvZ29EZXNjIj5Xb3JkbWFyayBzaG93aW5nIENyaXRpY2FsIFN0YXJ0IHdpdGggdGhlIENyaXRpY2FsIHBvcnRpb24gaW4gbmF2eSBhbmQgU3RhcnQgaW4gcmVkIG92ZXIgYSBibHVlIGdyYWRpZW50IGJhc2VsaW5lLjwvZGVzYz4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iY3NHcmFkaWVudCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjMDA5Q0RFIiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDRDOTciIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8cmVjdCB4PSIwIiB5PSI0NCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSI0IiBmaWxsPSJ1cmwoI2NzR3JhZGllbnQpIiByeD0iMiIgLz4KICA8dGV4dCB4PSIwIiB5PSIzNCIgZm9udC1mYW1pbHk9IidSb2JvdG8nLCAnQXJpYWwgQmxhY2snLCBzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iNzAwIiBmb250LXNpemU9IjM0IiBmaWxsPSIjMDA0Qzk3IiBsZXR0ZXItc3BhY2luZz0iMiI+CiAgICBDUklUSUNBTAogIDwvdGV4dD4KICA8dGV4dCB4PSIxNTIiIHk9IjM0IiBmb250LWZhbWlseT0iJ1JvYm90bycsICdBcmlhbCBCbGFjaycsIHNhbnMtc2VyaWYiIGZvbnQtd2VpZ2h0PSI3MDAiIGZvbnQtc2l6ZT0iMzQiIGZpbGw9IiNFRjMzNDAiIGxldHRlci1zcGFjaW5nPSIyIj4KICAgIFNUQVJUCiAgPC90ZXh0PgogIDx0ZXh0IHg9IjIyNiIgeT0iMTgiIGZvbnQtZmFtaWx5PSInUm9ib3RvJywgJ0FyaWFsJywgc2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9IjcwMCIgZm9udC1zaXplPSIxNCIgZmlsbD0iI0VGMzM0MCI+CiAgICDCrgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="Critical Start logo" style="width: 160px; height: auto; margin-bottom: 16px;">
                <h1 style="font-size: 24px; font-weight: 700; color: #004C97; margin-bottom: 8px;">
                    Escalation to Client Details Report — Signature Tier
                </h1>
                <p style="font-weight: 600; color: #343741; margin-bottom: 4px;">Lennar Corporation</p>
                <p style="color: rgba(52, 55, 65, 0.75); font-size: 14px;">Period: August 1-31, 2025 (31 days)</p>
                <p style="color: rgba(52, 55, 65, 0.6); font-size: 12px;">Production incidents escalated to client. Rolling 90-day benchmarks from the Cyber Operations Risk & Response&trade; (CORR) platform.</p>
            </div>
        </div>

        <!-- TIER 1: Hero Impact Section -->
        <div class="hero-section tier-1-spacing">
            <h2 class="hero-title">What We Delivered This Period</h2>
            <p class="hero-subtitle">Real protection, measurable outcomes.</p>
            
            <div class="hero-grid">
                <div class="hero-metric">
                    <div class="hero-number">452</div>
                    <div class="hero-label">Hours of Expert Analysis</div>
                    <div class="hero-context">Security operations your team didn't have to staff</div>
                </div>
                
                <div class="hero-metric">
                    <div class="hero-number">1,843</div>
                    <div class="hero-label">Alerts Resolved</div>
                    <div class="hero-context">Handled by the Critical Start Security Operations Center (CS SOC) without escalation—noise filtered so you could focus</div>
                </div>
                
                <div class="hero-metric">
                    <div class="hero-number">24/7</div>
                    <div class="hero-label">Coverage Provided</div>
                    <div class="hero-context">744 hours of continuous monitoring and response</div>
                </div>
                
                <div class="hero-metric">
                    <div class="hero-number">88%</div>
                    <div class="hero-label">Target Compliance</div>
                    <div class="hero-context">Response targets met across all incident severities</div>
                </div>
            </div>
            <p style="font-size: 12px; color: rgba(255, 255, 255, 0.8); margin-top: 32px; text-align: center; font-style: italic;">
                Sources: Cyber Operations Risk & Response&trade; (CORR) platform — Analyst Utilization & Coverage metadata; Report Extract — Incident Id (col 1), Escalated Datetime (US/Central) (col 20), CS SOC Time to Respond (TTR) (hh:mm) (col 37).
            </p>
        </div>

        <!-- Executive Summary - ENHANCED -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Executive Summary</h2>
            </div>
            <div class="card-content">
                <div style="margin-bottom: 16px;">
                    <p style="font-size: 32px; font-weight: 700; color: #343741;">267 Incidents Escalated</p>
                    <p style="color: rgba(52, 55, 65, 0.75);">Average 8.9 per day requiring your team's attention</p>
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.6); margin-top: 4px;">
                        Additionally: 1,843 alerts resolved by CS SOC without escalation (59.5 per day)
                    </p>
                </div>
                
                <div class="highlight-box">
                    <p style="font-weight: 600; color: #004C97; margin-bottom: 8px;">Period Highlights</p>
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8); line-height: 1.7;">
                        Your security posture remained strong this reporting period. We maintained 88% target compliance across all incident severities, with 90th percentile response time at 87 minutes. Of the 267 incidents escalated, we identified 11 true positive threats and contained them before business impact. False positive rate held at 9.0%, reflecting our ongoing commitment to signal over noise.
                    </p>
                </div>

                <div class="summary-grid">
                    <div class="summary-item">
                        <p class="summary-title">Threat Outcomes</p>
                        <p class="summary-value">11 threats contained, zero breaches</p>
                    </div>
                    <div class="summary-item">
                        <p class="summary-title">24/7 Protection</p>
                        <p class="summary-value">49% handled after-hours</p>
                    </div>
                    <div class="summary-item">
                        <p class="summary-title">Detection Quality</p>
                        <p class="summary-value">9.0% false positive rate</p>
                    </div>
                </div>
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 16px; font-style: italic;">
                    Sources: Report Extract — Incident Id (col 1), CS SOC Verdict (col 12), Escalated Datetime (US/Central) (col 20); Cyber Operations Risk & Response&trade; (CORR) platform — Non-escalated alert volume.
                </p>
            </div>
        </div>

        <!-- TIER 2: Performance & Trust Zone -->
        <!-- 3-Month Performance Trend -->
        <div class="card tier-2-spacing">
            <div class="card-header">
                <h2 class="card-title">Getting Better Every Period</h2>
            </div>
            <div class="card-content">
                <div class="chart-container">
                    <canvas id="trendChart"></canvas>
                </div>
                <div class="chart-legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #009CDE;"></div>
                        <span>Mean Time to Respond (MTTR)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #004C97;"></div>
                        <span>Mean Time to Detect (MTTD)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #EF3340; border: 2px dashed #EF3340; background: none;"></div>
                        <span>False Positive %</span>
                    </div>
                </div>
                <div class="info-box" style="background-color: rgba(0, 156, 222, 0.1);">
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8);">
                        <strong>Trend Analysis:</strong> Continuous improvement across all metrics. Mean Time to Respond (MTTR) decreased 25% to 126 minutes, while Mean Time to Detect (MTTD) improved 22% to 42 minutes, and false positive rate dropped 24% over three periods, demonstrating effective tuning and process maturation.
                    </p>
                </div>
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 8px; font-style: italic;">Data source: Cyber Operations Risk & Response&trade; (CORR) platform rolling 90-day averages</p>
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 4px; font-style: italic;">Visualization note: Mean Time to Respond (MTTR) and Mean Time to Detect (MTTD) render on the left axis in minutes; False Positive % renders on the right axis.</p>
            </div>
        </div>

        <!-- INCIDENT SPOTLIGHT - NEW -->

        <!-- Target Metrics - NOW WITH 4 CARDS INCLUDING P90 -->
        <div class="grid-4">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" style="font-size: 14px;">90th Percentile (P90) Response Time</h3>
                </div>
                <div class="card-content">
                    <p class="stat-value" style="color: #343741;">87m</p>
                    <p class="improvement-delta">↓ 25% vs 90-day avg</p>
                    <p class="stat-detail" style="margin-top: 8px;">Target &lt; 90m | 90th percentile</p>
                    <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75); margin-top: 4px; font-style: italic;">CS SOC Time to Respond (TTR) (col 37)</p>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" style="font-size: 14px;">Critical/High Priority MTTR</h3>
                </div>
                <div class="card-content">
                    <p class="stat-value" style="color: #343741;">67 min</p>
                    <p class="improvement-delta">↓ 4% improvement</p>
                    <p class="stat-detail" style="margin-top: 8px;">Target &lt; 90m | n=132</p>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" style="font-size: 14px;">Medium/Low MTTR</h3>
                </div>
                <div class="card-content">
                    <p class="stat-value" style="color: #343741;">52 min</p>
                    <p class="improvement-delta">↓ 18% improvement</p>
                    <p class="stat-detail" style="margin-top: 8px;">Target &lt; 90m | n=135</p>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" style="font-size: 14px;">Mean Time to Detect (MTTD)</h3>
                </div>
                <div class="card-content">
                    <p class="stat-value" style="color: #343741;">4 min</p>
                    <p class="improvement-delta">↓ 12% improvement</p>
                    <p class="stat-detail" style="margin-top: 8px;">Target &lt; 15m | n=267</p>
                </div>
            </div>
        </div>

        <!-- Industry Comparison -->
        <div class="card tier-2-spacing">
            <div class="card-header">
                <h2 class="card-title">Industry Comparison</h2>
            </div>
            <div class="card-content">
                <table class="table">
                    <thead>
                        <tr>
                            <th style="text-align: left;">Metric</th>
                            <th style="text-align: center;">Your Performance</th>
                            <th style="text-align: center;">Industry Average</th>
                            <th style="text-align: center;">Difference</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="font-weight: 500;">MTTR (minutes)</td>
                            <td style="text-align: center; font-weight: 700;">126</td>
                            <td style="text-align: center;">192</td>
                            <td style="text-align: center;">
                                <span class="status-badge status-better">34% Better</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="font-weight: 500;">MTTD (minutes)</td>
                            <td style="text-align: center; font-weight: 700;">42</td>
                            <td style="text-align: center;">66</td>
                            <td style="text-align: center;">
                                <span class="status-badge status-better">36% Better</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="font-weight: 500;">Incidents/Day</td>
                            <td style="text-align: center; font-weight: 700;">8.9</td>
                            <td style="text-align: center;">11.4</td>
                            <td style="text-align: center;">
                                <span class="status-badge status-better">22% Better</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 12px;">Benchmarks: SANS Institute 2024 Security Operations Center (SOC) Survey (Construction & Real Estate cohort), published averages converted to minutes.</p>
            </div>
        </div>

        <!-- TIER 3: Coverage & Capability Zone -->
        <!-- Value Delivered -->
        <div class="card cost-avoidance-card">
            <div class="card-header">
                <h2 class="card-title">Value Delivered This Period</h2>
            </div>
            <div class="card-content">
                <div style="text-align: center; margin-bottom: 24px;">
                    <p style="font-size: 48px; font-weight: 700; color: #004C97;">$7.55M</p>
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75); margin-top: 8px;">Combined security operations and threat prevention value</p>
                </div>
                
                <div class="grid-3">
                    <div class="cost-component">
                        <p class="stat-label" style="font-weight: 600; margin-bottom: 4px;">Security Operations</p>
                        <p style="font-size: 24px; font-weight: 700; color: #004C97;">$38K</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75); margin-top: 8px;">452 hours of expert analysis</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">Labor your team didn't have to provide</p>
                    </div>
                    
                    <div class="cost-component">
                        <p class="stat-label" style="font-weight: 600; margin-bottom: 4px;">24/7 Coverage</p>
                        <p style="font-size: 24px; font-weight: 700; color: #004C97;">$163K</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75); margin-top: 8px;">744 hours of continuous protection</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">vs. internal 24/7 Security Operations Center (SOC) staffing</p>
                    </div>
                    
                    <div class="cost-component">
                        <p class="stat-label" style="font-weight: 600; margin-bottom: 4px;">Threat Prevention</p>
                        <p style="font-size: 24px; font-weight: 700; color: #004C97;">$7.34M</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75); margin-top: 8px;">11 threats contained</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">Conservative breach cost model</p>
                    </div>
                </div>

                <div class="info-box" style="background: white; border: 1px solid #009CDE;">
                    <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">
                        <strong>Methodology:</strong> Operations value: 452 analyst hours × $85/hr loaded cost. Coverage value: Full-time Security Operations Center (SOC) analyst cost ($110K annually) × coverage ratio. Threat prevention: Contained threats × industry average breach cost ($4.45M) × conservative probability factor (15%). All calculations use industry-standard benchmarks and are configurable.
                    </p>
                </div>
            </div>
        </div>

        <!-- Product Breakdown -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Detection Sources & Quality</h2>
            </div>
            <div class="card-content">
                    <div class="product-item">
                        <div>
                            <p style="font-weight: 600; color: #343741;">Palo Alto Cortex XDR (Extended Detection and Response)</p>
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">189 incidents (70.8% of total)</p>
                    </div>
                    <div style="text-align: right;">
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">False Positive Rate</p>
                        <p style="font-size: 20px; font-weight: 700; color: #FF6A14;">11.2%</p>
                    </div>
                </div>
                <div class="product-item">
                    <div>
                        <p style="font-weight: 600; color: #343741;">Microsoft Sentinel</p>
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">52 incidents (19.5% of total)</p>
                    </div>
                    <div style="text-align: right;">
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">False Positive Rate</p>
                        <p style="font-size: 20px; font-weight: 700; color: #009CDE;">5.8%</p>
                    </div>
                </div>
                <div class="product-item">
                    <div>
                        <p style="font-weight: 600; color: #343741;">CrowdStrike Falcon</p>
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">26 incidents (9.7% of total)</p>
                    </div>
                    <div style="text-align: right;">
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">False Positive Rate</p>
                        <p style="font-size: 20px; font-weight: 700; color: #009CDE;">7.7%</p>
                    </div>
                </div>
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); font-style: italic; margin-top: 12px;">Source: Excel Extract columns 7 (Product) and 12 (CS SOC Verdict)</p>
            </div>
        </div>

        <!-- Escalation Methods - UPDATED -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">How Incidents Reach You</h2>
            </div>
            <div class="card-content">
                <div class="method-item">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div class="percentage-circle" style="background-color: #009CDE;">86%</div>
                        <div>
                            <p style="font-weight: 600; color: #343741;">Playbook (Automated)</p>
                            <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">229 incidents</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); font-style: italic;">Rule-based automated escalation</p>
                        </div>
                    </div>
                </div>
                <div class="method-item">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div class="percentage-circle" style="background-color: #FF6A14;">14%</div>
                        <div>
                            <p style="font-weight: 600; color: #343741;">CS SOC (Analyst Escalation)</p>
                            <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">38 incidents</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); font-style: italic;">Analyst-driven escalation requiring human judgment</p>
                        </div>
                    </div>
                </div>
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); font-style: italic; margin-top: 12px;">Source: Excel Extract column 9 (Initial Escalation Method)</p>
            </div>
        </div>

        <!-- Operational Load - UPDATED WITH CLARITY -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">CS SOC Alert Resolution</h2>
            </div>
            <div class="card-content">
                <div class="grid-2">
                    <div style="max-height: 300px; display: flex; align-items: center; justify-content: center;">
                        <canvas id="operationalLoadChart" style="max-height: 280px;"></canvas>
                    </div>
                    <div style="display: flex; flex-direction: column; justify-content: center; gap: 16px;">
                        <div>
                            <p class="stat-label">Business Hours (8am-6pm Mon-Fri)</p>
                            <p style="font-size: 24px; font-weight: 700; color: #009CDE;">
                                51% <span style="font-size: 16px; color: rgba(52, 55, 65, 0.75);">(940 alerts)</span>
                            </p>
                        </div>
                        <div>
                            <p class="stat-label">After Hours (6pm-8am weekdays)</p>
                            <p style="font-size: 24px; font-weight: 700; color: #702F8A;">
                                41% <span style="font-size: 16px; color: rgba(52, 55, 65, 0.75);">(756 alerts)</span>
                            </p>
                        </div>
                        <div>
                            <p class="stat-label">Weekend Coverage</p>
                            <p style="font-size: 24px; font-weight: 700; color: #EF3340;">
                                8% <span style="font-size: 16px; color: rgba(52, 55, 65, 0.75);">(147 alerts)</span>
                            </p>
                        </div>
                        <p class="info-box" style="background-color: rgba(0, 156, 222, 0.15); font-size: 14px;">
                            Our CS SOC team handled 903 alerts outside business hours—protection working while your team isn't.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- After-Hours Customer Calls -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">After-Hours Customer Notifications</h2>
            </div>
            <div class="card-content">
                <div class="highlight-box">
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8);">
                        <strong>High and Critical severity alerts require direct customer notification.</strong> This shows how often your team was contacted outside business hours for urgent threats.
                    </p>
                </div>
                
                <div class="grid-3" style="margin-top: 16px;">
                    <div style="text-align: center; padding: 20px; background: rgba(0, 156, 222, 0.05); border-radius: 8px;">
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75); margin-bottom: 8px;">After Hours Calls</p>
                        <p style="font-size: 32px; font-weight: 700; color: #702F8A; margin-bottom: 4px;">18%</p>
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">136 of 756 alerts</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 8px;">High/Critical requiring immediate attention</p>
                    </div>
                    <div style="text-align: center; padding: 20px; background: rgba(0, 156, 222, 0.05); border-radius: 8px;">
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75); margin-bottom: 8px;">Weekend Calls</p>
                        <p style="font-size: 32px; font-weight: 700; color: #EF3340; margin-bottom: 4px;">15%</p>
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">22 of 147 alerts</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 8px;">High/Critical requiring immediate attention</p>
                    </div>
                    <div style="text-align: center; padding: 20px; background: rgba(0, 156, 222, 0.05); border-radius: 8px;">
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75); margin-bottom: 8px;">Total Off-Hours Calls</p>
                        <p style="font-size: 32px; font-weight: 700; color: #009CDE; margin-bottom: 4px;">158</p>
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75);">17.5% of off-hours alerts</p>
                        <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 8px;">Your team was notified 5.1 times per day off-hours</p>
                    </div>
                </div>
                
                <div class="info-box" style="background-color: rgba(0, 156, 222, 0.1); margin-top: 16px;">
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8);">
                        <strong>Context:</strong> 82.5% of after-hours alerts (745 alerts) were handled by CS SOC without requiring customer notification, allowing your team to rest while maintaining security coverage. Only high and critical severity incidents required immediate contact.
                    </p>
                </div>
                
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 12px; font-style: italic;">
                    Source: Vendor Severity (col 45), Current Priority (col 13), Escalated Datetime (US/Central) (col 20)
                </p>
            </div>
        </div>



        <!-- TIER 4: Technical Detail Zone -->
        <!-- Response Efficiency -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Response Efficiency</h2>
            </div>
            <div class="card-content">
                <div class="grid-3">
                    <div class="stat-card" style="background-color: rgba(0, 156, 222, 0.15);">
                        <p class="stat-label">Containment Rate</p>
                        <p style="font-size: 36px; font-weight: 700; color: #004C97;">98%</p>
                        <p class="stat-detail">262 of 267 contained</p>
                        <p style="font-size: 11px; color: rgba(52, 55, 65, 0.6); margin-top: 4px;">Response Action Status (col 36)</p>
                    </div>
                    <div class="stat-card" style="background-color: rgba(0, 156, 222, 0.15);">
                        <p class="stat-label">Playbook Automation</p>
                        <p style="font-size: 36px; font-weight: 700; color: #004C97;">86%</p>
                        <p class="stat-detail">Consistent, rule-based escalation</p>
                        <p style="font-size: 11px; color: rgba(52, 55, 65, 0.6); margin-top: 4px;">Initial Escalation Method (col 9)</p>
                    </div>
                    <div class="stat-card" style="background-color: rgba(255, 106, 20, 0.15);">
                        <p class="stat-label">Analyst Escalation</p>
                        <p style="font-size: 36px; font-weight: 700; color: #FF6A14;">14%</p>
                        <p class="stat-detail">Human judgment required</p>
                        <p style="font-size: 11px; color: rgba(52, 55, 65, 0.6); margin-top: 4px;">Initial Escalation Method (col 9)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Customer Engagement -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Collaboration Quality</h2>
            </div>
            <div class="card-content">
                <div class="grid-3">
                    <div style="text-align: center;">
                        <p class="stat-label">Average Touches per Incident</p>
                        <p style="font-size: 32px; font-weight: 700; color: #009CDE;">2.3</p>
                        <p style="font-size: 11px; color: rgba(52, 55, 65, 0.6); margin-top: 4px;">Touched By (col 26)</p>
                    </div>
                    <div style="text-align: center;">
                        <p class="stat-label">Active Client Participation</p>
                        <p style="font-size: 32px; font-weight: 700; color: #009CDE;">72%</p>
                        <p style="font-size: 11px; color: rgba(52, 55, 65, 0.6); margin-top: 4px;">Customer Last Comment (col 29)</p>
                    </div>
                    <div style="text-align: center;">
                        <p class="stat-label">Client-Led Closures</p>
                        <p style="font-size: 32px; font-weight: 700; color: #009CDE;">21%</p>
                        <p style="font-size: 11px; color: rgba(52, 55, 65, 0.6); margin-top: 4px;">Closed By (col 27)</p>
                    </div>
                </div>
                <p style="font-size: 14px; color: rgba(52, 55, 65, 0.75); text-align: center; margin-top: 16px; font-style: italic;">
                    Strong two-way collaboration. High client participation indicates trust and engagement with the CS SOC process.
                </p>
            </div>
        </div>

        <!-- Detection Quality -->
        <div class="card detection-quality-card tier-2-spacing">
            <div class="card-header">
                <h2 class="card-title">Detection Quality</h2>
                <p class="card-subtitle">Precision, signal fidelity, and client-validated outcomes across escalations</p>
            </div>
              <div class="card-content">
                  <div class="detection-quality-layout">
                      <div>
                          <div class="detection-metric-grid">
                              <div class="detection-metric detection-metric-critical">
                                  <p class="detection-metric-label">True Threat Precision</p>
                                  <p class="detection-metric-value" style="color: #EF3340;">31.4%</p>
                                  <p class="detection-metric-detail">11 TP ÷ (11 TP + 24 FP)</p>
                                  <p class="detection-metric-trend">Focused adversary detections delivered this period</p>
                              </div>
                              <div class="detection-metric detection-metric-positive">
                                  <p class="detection-metric-label">Signal Fidelity</p>
                                  <p class="detection-metric-value" style="color: #004C97;">91%</p>
                                  <p class="detection-metric-detail">243 actionable escalations (TP + BTP) of 267 total</p>
                                  <p class="detection-metric-trend">Aligned with 88% response target compliance</p>
                              </div>
                                <div class="detection-metric detection-metric-warning">
                                    <p class="detection-metric-label">False Positive Rate</p>
                                    <p class="detection-metric-value" style="color: #FF6A14;">9.0%</p>
                                    <p class="detection-metric-detail">Target &lt; 10% | ↓ 3.1 pts vs prior period</p>
                                    <p class="detection-metric-trend">Only Cortex XDR remains above threshold (11.2%)</p>
                                </div>
                                <div class="detection-metric">
                                    <p class="detection-metric-label">Client-Validated Outcomes</p>
                                    <p class="detection-metric-value" style="color: #009CDE;">86.9%</p>
                                    <p class="detection-metric-detail">Share of escalations your team confirmed as accurate (benign true positives) via the Trusted Behavior Registry&reg; (TBR&reg;)</p>
                                    <p class="detection-metric-trend">Backed by 4 min MTTD and rapid analyst follow-up</p>
                                </div>
                          </div>
                          <div class="info-box" style="background-color: rgba(0, 156, 222, 0.08); border: 1px solid rgba(0, 156, 222, 0.2); margin-top: 20px;">
                              <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8);">
                                    <strong>Key Insights:</strong> Signal quality improved again this period. False positive rate dropped 3.1 points, sustaining 100% containment across 11 true threats.
                              </p>
                          </div>
                      </div>
                  </div>
                    <p class="detection-footnote">Source: CS SOC Verdict (col 12); Trusted Behavior Registry&reg; (TBR&reg;) validations; Report Extract incident counts.</p>
              </div>
        </div>

        <div class="card severity-card tier-2-spacing">
            <div class="card-header">
                <div>
                    <h2 class="card-title">Severity Alignment Flow</h2>
                    <p class="card-subtitle">Vendor-reported criticality vs. Critical Start adjudication</p>
                </div>
                <span class="severity-chip" data-total-escalations>267 escalations</span>
            </div>
            <div class="card-content">
                <div class="severity-card-body">
                    <div class="severity-flow-panel">
                        <p>
                            Our SOC analysts re-evaluate every vendor alert before escalating. The Sankey view highlights how often Critical Start raises or lowers the raw severity to reflect the real business impact you need to act on.
                        </p>
                        <div class="severity-flow-stats">
                            <div class="flow-stat" data-accent="critical">
                                <div class="flow-stat-value" data-flow-upgraded>0</div>
                                <div class="flow-stat-label">Alerts upgraded</div>
                            </div>
                            <div class="flow-stat" data-accent="warning">
                                <div class="flow-stat-value" data-flow-downgraded>0</div>
                                <div class="flow-stat-label">Alerts de-escalated</div>
                            </div>
                            <div class="flow-stat">
                                <div class="flow-stat-value" data-flow-aligned>0</div>
                                <div class="flow-stat-label">Remained aligned</div>
                            </div>
                        </div>
                        <ul class="severity-flow-insights">
                            <li data-accent="lift"><span data-flow-upgrade-copy>Upgraded alerts ensure true critical issues trigger engagement.</span></li>
                            <li data-accent="lower"><span data-flow-downgrade-copy>De-escalations remove vendor noise before it hits your team.</span></li>
                            <li><span data-flow-dominant-copy>The largest path shows where automation investments will deliver the fastest relief.</span></li>
                        </ul>
                    </div>
                    <div class="sankey-chart-wrapper">
                        <div class="sankey-chart-container">
                            <canvas id="severitySankeyChart"></canvas>
                        </div>
                        <div class="sankey-legend" id="sankeyLegend"></div>
                    </div>
                </div>
                <p class="card-footnote">Source: Vendor Severity (col 45) vs. Critical Start Determination (Current Priority, col 13)</p>
            </div>
        </div>

        <!-- Threat Landscape - STACKED BY SEVERITY -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Threat Landscape by Tactic & Severity</h2>
            </div>
            <div class="card-content">
                <div class="chart-container" style="height: 280px;">
                    <canvas id="mitreChart"></canvas>
                </div>
                <div class="info-box" style="background-color: rgba(0, 156, 222, 0.1); margin-top: 16px;">
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8);">
                        <strong>Key Insight:</strong> Persistence tactics show the highest concentration of high-severity incidents (12 of 77), suggesting adversaries are attempting to establish foothold. Defense Evasion follows closely. These patterns warrant enhanced detection rules and proactive hunting.
                    </p>
                </div>
                <p style="font-size: 12px; color: rgba(52, 55, 65, 0.6); margin-top: 8px; font-style: italic;">
                    Source: MITRE ATT&amp;CK® tactic name (col 42), MITRE ATT&amp;CK technique name (col 44), Vendor Severity (col 45)
                </p>
            </div>
        </div>

        <!-- ENHANCED Improvement Opportunities -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Prioritized Improvement Plan</h2>
            </div>
            <div class="card-content">
                <div class="highlight-box">
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8);">
                        <strong>Action-Oriented Recommendations:</strong> These improvements are prioritized by impact and auto-generated from threshold analysis. Each includes ownership and target timelines.
                    </p>
                </div>
                
                <!-- Improvement 1: Detection Tuning -->
                <div class="improvement-item" style="border-left: 4px solid #EF3340;">
                    <div style="margin-bottom: 12px;">
                        <span class="priority-badge priority-high">HIGH</span>
                        <span style="font-weight: 600; font-size: 14px; color: #004C97; margin-left: 8px;">Detection Tuning</span>
                    </div>
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8); margin-bottom: 12px;">
                            Palo Alto Cortex XDR false positive rate is 11.2%, exceeding the 10.0% threshold and keeping the overall rate at 9.0%. Tuning these alerts will reduce client noise and improve SOC efficiency.
                        </p>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; font-size: 12px;">
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Owner:</span>
                            <p style="font-weight: 600;">CS SOC + Lennar Security Team</p>
                        </div>
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Target:</span>
                            <p style="font-weight: 600;">Next 30 days</p>
                        </div>
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Expected Impact:</span>
                            <p style="font-weight: 600;">Reduce escalations by ~20%, improve analyst focus</p>
                        </div>
                    </div>
                </div>

                <!-- Improvement 2: Automation -->
                <div class="improvement-item" style="border-left: 4px solid #FF6A14;">
                    <div style="margin-bottom: 12px;">
                        <span class="priority-badge priority-medium">MEDIUM</span>
                        <span style="font-weight: 600; font-size: 14px; color: #004C97; margin-left: 8px;">Automation Opportunity</span>
                    </div>
                        <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8); margin-bottom: 12px;">
                            Manual escalations at 14% exceed our 12% target. 38 incidents required analyst judgment. Expanding playbook coverage will improve consistency.
                        </p>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; font-size: 12px;">
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Owner:</span>
                            <p style="font-weight: 600;">CS SOC Engineering</p>
                        </div>
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Target:</span>
                            <p style="font-weight: 600;">Next 60 days</p>
                        </div>
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Expected Impact:</span>
                            <p style="font-weight: 600;">Reduce manual review burden, faster escalation times</p>
                        </div>
                    </div>
                </div>

                <!-- Improvement 3: Threat Focus -->
                <div class="improvement-item" style="border-left: 4px solid #EF3340;">
                    <div style="margin-bottom: 12px;">
                        <span class="priority-badge priority-high">HIGH</span>
                        <span style="font-weight: 600; font-size: 14px; color: #004C97; margin-left: 8px;">Threat Focus</span>
                    </div>
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8); margin-bottom: 12px;">
                        Persistence and Defense Evasion tactics driving 20 high-severity incidents. These persistence and evasion techniques suggest sophisticated adversary activity requiring enhanced detection.
                    </p>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; font-size: 12px;">
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Owner:</span>
                            <p style="font-weight: 600;">Joint - CS Threat Intel + Lennar</p>
                        </div>
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Target:</span>
                            <p style="font-weight: 600;">Ongoing</p>
                        </div>
                        <div>
                            <span style="color: rgba(52, 55, 65, 0.75);">Expected Impact:</span>
                            <p style="font-weight: 600;">Improved detection of advanced threats, reduced dwell time</p>
                        </div>
                    </div>
                </div>

                <div class="info-box" style="background-color: rgba(0, 156, 222, 0.05);">
                    <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">
                        <strong>Recommendation Engine:</strong> These trigger automatically when metrics cross defined thresholds:
                    </p>
                    <ul style="list-style-type: disc; padding-left: 20px; margin-top: 8px; font-size: 12px; color: rgba(52, 55, 65, 0.75);">
                        <li>Source-level false positive rate threshold: 10.0%</li>
                        <li>Manual escalation threshold: 12%</li>
                        <li>Containment target: 95%</li>
                    </ul>
                </div>
            </div>
        </div>


        <!-- Value Delivered - Detailed Breakdown -->
        <div class="card" style="background: linear-gradient(to bottom right, rgba(0, 156, 222, 0.15), rgba(0, 76, 151, 0.1));">
            <div class="card-header">
                <h2 class="card-title">Security Outcomes This Period</h2>
            </div>
            <div class="card-content">
                <p style="font-weight: 600; color: rgba(52, 55, 65, 0.8); margin-bottom: 12px;">Your Managed Detection and Response (MDR) investment delivered measurable security outcomes:</p>
                <div class="grid-2">
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">452 Hours of Expert Analysis</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">Security operations work your team didn't have to staff</p>
                        </div>
                    </div>
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">1,843 Alerts Resolved</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">Noise reduction—87% handled without escalation</p>
                        </div>
                    </div>
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">24/7 Coverage Maintained</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">744 hours of continuous monitoring and response</p>
                        </div>
                    </div>
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">11 Threats Contained</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">True positive threats stopped before business impact</p>
                        </div>
                    </div>
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">88% Target Compliance</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">Response targets met across all incident severities</p>
                        </div>
                    </div>
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">87-Minute 90th Percentile (P90) Response</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">90th percentile incidents resolved under the 90-minute target</p>
                        </div>
                    </div>
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">Zero Breaches</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">No ransomware, no data loss, and no operational disruption</p>
                        </div>
                    </div>
                    <div class="value-item">
                        <span class="icon-outline" aria-hidden="true"><i class="fa-regular fa-circle-check"></i></span>
                        <div>
                            <p style="font-weight: 600; font-size: 14px;">9.0% False Positive Rate</p>
                            <p style="font-size: 12px; color: rgba(52, 55, 65, 0.75);">High signal-to-noise ratio maintained through ongoing tuning</p>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 16px; padding: 12px; background: white; border-radius: 6px;">
                    <p style="font-size: 14px; color: rgba(52, 55, 65, 0.8);">
                        <strong>Looking Ahead:</strong> In the next period we're focused on reducing false positives another 20% through enhanced Palo Alto XDR tuning and expanding playbook automation to push manual escalations down to the 12% target.
                    </p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p style="font-weight: 600; margin-bottom: 4px;">Report Generated: November 5, 2025</p>
        <p style="margin-bottom: 4px;">Data Sources: Excel Escalation Export (45 columns) + Cyber Operations Risk & Response&trade; (CORR) platform (90-day trends and benchmarks)</p>
            <p style="margin-bottom: 4px;">All metrics calculated from source data. Improvement recommendations auto-generated based on configured thresholds.</p>
            <p>Questions? Your Customer Success Manager is here to help.</p>
        </div>
    </div>

    <script>
        // Operational Load Pie Chart
        const opLoadCtx = document.getElementById('operationalLoadChart').getContext('2d');
        new Chart(opLoadCtx, {
            type: 'pie',
            data: {
                labels: ['Business Hours', 'After Hours', 'Weekend'],
                datasets: [{
                    data: [51, 41, 8],
                    backgroundColor: ['#009CDE', '#702F8A', '#EF3340'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            font: {
                                family: 'Roboto',
                                size: 12
                            },
                            padding: 15
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.parsed + '%';
                            }
                        }
                    }
                }
            }
        });

        // Performance Trend Line Chart - MORE REALISTIC DATA
        const trendCtx = document.getElementById('trendChart').getContext('2d');
        new Chart(trendCtx, {
            type: 'line',
            data: {
                labels: ['Period -2', 'Period -1', 'Current'],
                datasets: [
                    {
                        label: 'MTTR (min)',
                        data: [168, 150, 126],
                        borderColor: '#009CDE',
                        backgroundColor: 'rgba(0, 156, 222, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    },
                    {
                        label: 'MTTD (min)',
                        data: [54, 48, 42],
                        borderColor: '#004C97',
                        backgroundColor: 'rgba(0, 76, 151, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    },
                    {
                        label: 'FP %',
                        data: [12.1, 10.8, 9.2],
                        borderColor: '#EF3340',
                        backgroundColor: 'rgba(239, 51, 64, 0.1)',
                        borderWidth: 3,
                        borderDash: [8, 4],
                        tension: 0.4,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        yAxisID: 'y1'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        callbacks: {
                            label: function(context) {
                                const datasetLabel = context.dataset.label || '';
                                const value = context.parsed.y;
                                if (datasetLabel.includes('FP')) {
                                    return datasetLabel + ': ' + value.toFixed(1) + '%';
                                }
                                return datasetLabel + ': ' + Math.round(value) + ' min';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Minutes'
                        },
                        ticks: {
                            font: {
                                family: 'Roboto',
                                size: 11
                            }
                        }
                    },
                    y1: {
                        beginAtZero: true,
                        position: 'right',
                        title: {
                            display: true,
                            text: 'False Positive %'
                        },
                        grid: {
                            drawOnChartArea: false
                        },
                        ticks: {
                            font: {
                                family: 'Roboto',
                                size: 11
                            },
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                family: 'Roboto',
                                size: 11
                            }
                        }
                    }
                }
            }
        });

          // Severity Alignment Sankey
          const severityFlows = [
              { from: 'Vendor Critical', to: 'CS Critical', flow: 7 },
              { from: 'Vendor Critical', to: 'CS High', flow: 1 },
              { from: 'Vendor High', to: 'CS Critical', flow: 2 },
              { from: 'Vendor High', to: 'CS High', flow: 7 },
              { from: 'Vendor High', to: 'CS Medium', flow: 4 },
              { from: 'Vendor High', to: 'CS Low', flow: 2 },
              { from: 'Vendor Medium', to: 'CS High', flow: 9 },
              { from: 'Vendor Medium', to: 'CS Medium', flow: 72 },
              { from: 'Vendor Medium', to: 'CS Low', flow: 32 },
              { from: 'Vendor Medium', to: 'CS Informational', flow: 8 },
              { from: 'Vendor Low', to: 'CS Medium', flow: 18 },
              { from: 'Vendor Low', to: 'CS Low', flow: 67 },
              { from: 'Vendor Low', to: 'CS Informational', flow: 18 },
              { from: 'Vendor Informational', to: 'CS Low', flow: 5 },
              { from: 'Vendor Informational', to: 'CS Informational', flow: 15 }
          ];

          const severityBaseColors = {
              Critical: '#EF3340',
              High: '#FF6A14',
              Medium: '#FDBA4D',
              Low: '#009CDE',
              Informational: '#9CA3AF'
          };

            const nodeColorMap = {};
            Object.keys(severityBaseColors).forEach((severity) => {
                nodeColorMap[`Vendor ${severity}`] = severityBaseColors[severity];
                nodeColorMap[`CS ${severity}`] = severityBaseColors[severity];
            });

            const sankeyPriorityOrder = ['Critical', 'High', 'Medium', 'Low', 'Informational'];
            const nodePriorityMap = sankeyPriorityOrder.reduce((acc, severity, index) => {
                acc[`Vendor ${severity}`] = index;
                acc[`CS ${severity}`] = index;
                return acc;
            }, {});

          const severityOrder = ['Informational', 'Low', 'Medium', 'High', 'Critical'];
          const totalSeverityFlows = severityFlows.reduce((sum, link) => sum + link.flow, 0);

          const getSeverityDetails = (label) => {
              const parts = label.split(' ');
              const severityLabel = parts[parts.length - 1];
              return {
                  name: severityLabel,
                  index: severityOrder.indexOf(severityLabel)
              };
          };

          const aggregateShifts = severityFlows.reduce((acc, link) => {
              const source = getSeverityDetails(link.from);
              const target = getSeverityDetails(link.to);

              if (target.index > source.index) {
                  acc.upgraded += link.flow;
                  if (link.flow > acc.topUpgrade.flow) {
                      acc.topUpgrade = { ...link, severity: `${source.name} → ${target.name}` };
                  }
              } else if (target.index < source.index) {
                  acc.downgraded += link.flow;
                  if (link.flow > acc.topDowngrade.flow) {
                      acc.topDowngrade = { ...link, severity: `${source.name} → ${target.name}` };
                  }
              } else {
                  acc.aligned += link.flow;
              }

              if (link.flow > acc.topFlow.flow) {
                  acc.topFlow = { ...link, severity: `${source.name} → ${target.name}` };
              }

              return acc;
          }, {
              upgraded: 0,
              downgraded: 0,
              aligned: 0,
              topUpgrade: { flow: 0, severity: '' },
              topDowngrade: { flow: 0, severity: '' },
              topFlow: { flow: 0, severity: '' }
          });

          const formatNumber = (value) => value.toLocaleString('en-US');
          const formatPercentValue = (value) => {
              if (!totalSeverityFlows) {
                  return '0%';
              }
              const pct = ((value / totalSeverityFlows) * 100).toFixed(1);
              return pct.endsWith('.0') ? pct.slice(0, -2) + '%' : pct + '%';
          };

          const totalChipEl = document.querySelector('[data-total-escalations]');
          if (totalChipEl) {
              totalChipEl.textContent = `${formatNumber(totalSeverityFlows)} escalations`;
          }

          const flowUpgradedEl = document.querySelector('[data-flow-upgraded]');
          const flowDowngradedEl = document.querySelector('[data-flow-downgraded]');
          const flowAlignedEl = document.querySelector('[data-flow-aligned]');

          if (flowUpgradedEl) {
              flowUpgradedEl.textContent = formatNumber(aggregateShifts.upgraded);
          }
          if (flowDowngradedEl) {
              flowDowngradedEl.textContent = formatNumber(aggregateShifts.downgraded);
          }
          if (flowAlignedEl) {
              flowAlignedEl.textContent = formatNumber(aggregateShifts.aligned);
          }

          const upgradeCopyEl = document.querySelector('[data-flow-upgrade-copy]');
          if (upgradeCopyEl) {
              if (aggregateShifts.upgraded) {
                  upgradeCopyEl.textContent = `${formatNumber(aggregateShifts.upgraded)} alerts (${formatPercentValue(aggregateShifts.upgraded)}) were upgraded — primarily ${aggregateShifts.topUpgrade.severity} (${aggregateShifts.topUpgrade.flow}) when vendor context understated the risk.`;
              } else {
                  upgradeCopyEl.textContent = 'No vendor alerts required an upward severity adjustment this period.';
              }
          }

          const downgradeCopyEl = document.querySelector('[data-flow-downgrade-copy]');
          if (downgradeCopyEl) {
              if (aggregateShifts.downgraded) {
                  const downgradeHighlight = aggregateShifts.topDowngrade.flow
                      ? `${aggregateShifts.topDowngrade.severity} (${aggregateShifts.topDowngrade.flow})`
                      : 'de-escalated flows';
                  downgradeCopyEl.textContent = `${formatNumber(aggregateShifts.downgraded)} alerts (${formatPercentValue(aggregateShifts.downgraded)}) were de-escalated — ${downgradeHighlight} kept noise away from your on-call team.`;
              } else {
                  downgradeCopyEl.textContent = 'All vendor alerts held their original severity, no de-escalations required.';
              }
          }

          const dominantCopyEl = document.querySelector('[data-flow-dominant-copy]');
          if (dominantCopyEl) {
              if (aggregateShifts.topFlow.flow) {
                  dominantCopyEl.textContent = `Largest stream: ${aggregateShifts.topFlow.severity} (${aggregateShifts.topFlow.flow} alerts). Targeting automation/tuning here will yield the most impact.`;
              } else {
                  dominantCopyEl.textContent = 'Severity paths evenly distributed this period.';
              }
          }

          const sankeyLegendEl = document.getElementById('sankeyLegend');
          if (sankeyLegendEl) {
              sankeyLegendEl.innerHTML = '';
              severityOrder.slice().reverse().forEach((severity) => {
                  const legendItem = document.createElement('div');
                  legendItem.className = 'legend-item';
                  legendItem.innerHTML = `
                      <span class="legend-dot" style="background-color: ${severityBaseColors[severity]};"></span>
                      <span>${severity}</span>
                  `;
                  sankeyLegendEl.appendChild(legendItem);
              });
          }

          // Severity Sankey Chart - with error handling
          try {
              const severitySankeyCanvas = document.getElementById('severitySankeyChart');
              if (severitySankeyCanvas) {
                  const severitySankeyCtx = severitySankeyCanvas.getContext('2d');
                  new Chart(severitySankeyCtx, {
                      type: 'sankey',
                      data: {
                          datasets: [{
                              label: 'Severity alignment',
                              data: severityFlows,
                              colorFrom: (ctx) => {
                                  const link = ctx.dataset.data[ctx.dataIndex];
                                  return nodeColorMap[link.from] || '#009CDE';
                              },
                              colorTo: (ctx) => {
                                  const link = ctx.dataset.data[ctx.dataIndex];
                                  return nodeColorMap[link.to] || '#004C97';
                              },
                                priority: nodePriorityMap,
                              colorMode: 'gradient',
                              nodeWidth: 18,
                              nodePadding: 18,
                              borderColor: 'rgba(255, 255, 255, 0.9)',
                              borderWidth: 1
                          }]
                      },
                      options: {
                          responsive: true,
                          maintainAspectRatio: false,
                          plugins: {
                              legend: {
                                  display: false
                              },
                              tooltip: {
                                  callbacks: {
                                      title: () => '',
                                      label: (context) => {
                                          const link = context.raw || context.dataset.data[context.dataIndex];
                                          return `${link.from} → ${link.to}: ${formatNumber(link.flow)} alerts (${formatPercentValue(link.flow)})`;
                                      }
                                  }
                              }
                            }
                      }
                  });
              }
          } catch (error) {
              console.error('Error initializing Severity Sankey chart:', error);
          }

        // MITRE ATT&CK STACKED Bar Chart - with error handling
        try {
            const mitreCanvas = document.getElementById('mitreChart');
            if (mitreCanvas) {
                const mitreCtx = mitreCanvas.getContext('2d');
                new Chart(mitreCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Persistence', 'Defense Evasion', 'Execution', 'Discovery', 'Initial Access'],
                        datasets: [
                            {
                                label: 'High',
                                data: [12, 8, 5, 3, 2],
                                backgroundColor: '#EF3340',
                                borderRadius: 0
                            },
                            {
                                label: 'Medium',
                                data: [38, 31, 22, 18, 12],
                                backgroundColor: '#FF6A14',
                                borderRadius: 0
                            },
                            {
                                label: 'Low',
                                data: [22, 18, 15, 24, 16],
                                backgroundColor: '#009CDE',
                                borderRadius: 0
                            },
                            {
                                label: 'Info',
                                data: [5, 3, 2, 8, 3],
                                backgroundColor: '#9CA3AF',
                                borderRadius: 0
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    font: {
                                        family: 'Roboto',
                                        size: 11
                                    },
                                    padding: 10
                                }
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                callbacks: {
                                    footer: function(tooltipItems) {
                                        let total = 0;
                                        tooltipItems.forEach(function(tooltipItem) {
                                            total += tooltipItem.parsed.y;
                                        });
                                        return 'Total: ' + total;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                stacked: true,
                                ticks: {
                                    font: {
                                        family: 'Roboto',
                                        size: 10
                                    },
                                    maxRotation: 45,
                                    minRotation: 15
                                }
                            },
                            y: {
                                stacked: true,
                                beginAtZero: true,
                                ticks: {
                                    font: {
                                        family: 'Roboto',
                                        size: 11
                                    }
                                }
                            }
                        }
                    }
                });
            }
        } catch (error) {
            console.error('Error initializing MITRE ATT&CK chart:', error);
        }
    </script>
</body>
</html>
